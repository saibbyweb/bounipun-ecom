(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{573:function(e,t,o){"use strict";o.r(t);o(299),o(300),o(61),o(32);var n=o(3),c={props:{model:String},data:function(){return{editMode:!1,doc:{_id:"",name:"",code:"",info1:"",description:"",status:!1},loading:!1,updated:!1}},methods:{updateDocument:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$updateDocument(e.model,e.doc,e.editMode);case 3:if(o=t.sent,e.loading=!1,o.updated){t.next=7;break}return t.abrupt("return");case 7:e.$emit("updated"),e.populateForm(o.doc),e.$flash(e);case 10:case"end":return t.stop()}}),t)})))()},deleteDocument:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$deleteDocument(e.model,e.doc._id);case 3:if(o=t.sent,e.loading=!1,o.deleted){t.next=7;break}return t.abrupt("return");case 7:e.$emit("updated"),e.resetForm(),e.$flash(e);case 10:case"end":return t.stop()}}),t)})))()},populateForm:function(details){var e=details._id,t=details.name,code=details.code,o=details.info1,n=details.description,c=details.status;this.doc={_id:e,name:t,code:code,info1:o,description:n,status:c},this.editMode=!0},closeForm:function(){this.resetForm(),this.$emit("close")},resetForm:function(){this.populateForm({_id:"",name:"",code:"",info1:"",description:"",status:!1}),this.editMode=!1}}},r=o(7),component=Object(r.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"contents"},[o("CancelUpdate",{on:{close:e.closeForm}}),e._v(" "),o("h2",{staticClass:"heading"},[e._v(" "+e._s(e.editMode?"Update":"Add New")+" Fabric ")]),e._v(" "),e.editMode?o("InputBox",{attrs:{label:"fabric ID",disbaled:"",internal:!0},model:{value:e.doc._id,callback:function(t){e.$set(e.doc,"_id",t)},expression:"doc._id"}}):e._e(),e._v(" "),o("InputBox",{attrs:{label:"Code",internal:!0},model:{value:e.doc.code,callback:function(t){e.$set(e.doc,"code",t)},expression:"doc.code"}}),e._v(" "),o("InputBox",{attrs:{label:"fabric Name"},model:{value:e.doc.name,callback:function(t){e.$set(e.doc,"name",t)},expression:"doc.name"}}),e._v(" "),o("InputBox",{attrs:{label:"Info #1"},model:{value:e.doc.info1,callback:function(t){e.$set(e.doc,"info1",t)},expression:"doc.info1"}}),e._v(" "),o("TextBox",{attrs:{label:"Description",internal:!0},model:{value:e.doc.description,callback:function(t){e.$set(e.doc,"description",t)},expression:"doc.description"}}),e._v(" "),o("Toggle",{attrs:{label:"Status"},model:{value:e.doc.status,callback:function(t){e.$set(e.doc,"status",t)},expression:"doc.status"}}),e._v(" "),o("div",{staticClass:"center-space"},[e.loading?o("img",{staticClass:"loading",attrs:{src:"/loading.gif"}}):e._e(),e._v(" "),e.updated?o("img",{staticClass:"action-complete",attrs:{src:"/complete.gif"}}):e._e(),e._v(" "),o("button",{staticClass:"action",attrs:{disabled:e.loading},on:{click:e.updateDocument}},[e._v(" "+e._s(e.editMode?"Edit":"Add")+" Fabric ")]),e._v(" "),e.editMode?o("button",{staticClass:"action delete",attrs:{disabled:e.loading},on:{click:e.deleteDocument}},[e._v(" Delete ")]):e._e()])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CancelUpdate:o(311).default,InputBox:o(307).default,TextBox:o(310).default,Toggle:o(308).default})},597:function(e,t,o){"use strict";o.r(t);o(33),o(61),o(32);var n=o(3),c={layout:"admin",data:function(){return{showForm:!1,loading:!1,model:"fabrics",filters:[{name:"All Collections",value:"all"},{name:"Karakul",value:"karakul"},{name:"Autograph",value:"autograph"},{name:"Escape",value:"escape"}],selectedFilter:"all",list:[],headings:["_id","Fabric Name","Code","Status"]}},mounted:function(){this.fetchList()},methods:{documentFetched:function(e){this.showForm=!0,this.editMode=!0,console.log(this.$refs.updateComponent.populateForm(e))},fetchList:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$fetchCollection(e.model);case 3:if(o=t.sent,e.loading=!1,o.fetched&&0!==o.docs.length){t.next=8;break}return e.list=[],t.abrupt("return");case 8:e.list=o.docs.map((function(e){return{_id:e._id,name:e.name,code:e.code,status:e.status}}));case 9:case"end":return t.stop()}}),t)})))()}}},r=o(7),component=Object(r.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"fabrics crud"},[o("div",{staticClass:"filters center",class:{updating:e.showForm}},[o("input",{staticClass:"search shadow",attrs:{type:"text",placeholder:"Search for Fabrics"}}),e._v(" "),o("SelectBox",{attrs:{options:e.filters},model:{value:e.selectedFilter,callback:function(t){e.selectedFilter=t},expression:"selectedFilter"}})],1),e._v(" "),o("div",{staticClass:"list",class:{updating:e.showForm}},[o("List",{attrs:{list:e.list,model:e.model,headings:e.headings,custom_css:"10% 40% 25% 25%"},on:{documentFetched:e.documentFetched}})],1),e._v(" "),o("div",{staticClass:"update",class:{updating:e.showForm}},[o("UpdateFabric",{directives:[{name:"show",rawName:"v-show",value:e.showForm,expression:"showForm"}],ref:"updateComponent",attrs:{model:e.model},on:{updated:e.fetchList,close:function(t){e.showForm=!1}}}),e._v(" "),e.showForm?e._e():o("AddNewItem",{attrs:{label:"fabric"},on:{showForm:function(t){e.showForm=!0}}})],1)])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SelectBox:o(298).default,List:o(306).default,UpdateFabric:o(573).default,AddNewItem:o(309).default})}}]);