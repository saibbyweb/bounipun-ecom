(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{521:function(e,t,r){var content=r(579);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("1f5f167e",content,!0,{sourceMap:!1})},578:function(e,t,r){"use strict";r(521)},579:function(e,t,r){var d=r(11),n=r(29),o=r(30),c=r(31),l=r(32),f=r(33),m=r(34),v=r(35),h=r(36),y=r(37),w=r(38),x=r(39);t=d(!1);var _=n(o),C=n(c),k=n(l),P=n(f),A=n(m),S=n(v),z=n(h),R=n(y),j=n(w),E=n(x);t.push([e.i,'@font-face{font-family:"SF-Pro";font-style:normal;font-weight:400;font-display:swap;src:url('+_+') format("truetype")}@font-face{font-family:"SF-Pro SemiBold";font-style:normal;font-weight:700;font-display:swap;src:url('+C+') format("truetype")}@font-face{font-family:"SF-Pro Bold";font-style:normal;font-weight:900;font-display:swap;src:url('+k+') format("truetype")}@font-face{font-family:"Poppins";font-style:normal;font-weight:400;font-display:swap;src:url('+P+') format("truetype")}@font-face{font-family:"Poppins SemiBold";font-style:normal;font-weight:700;font-display:swap;src:url('+A+') format("truetype")}@font-face{font-family:"Poppins Bold";font-style:normal;font-weight:900;font-display:swap;src:url('+S+') format("truetype")}@font-face{font-family:"Garamond";font-style:normal;font-weight:400;font-display:swap;src:url('+z+') format("truetype")}@font-face{font-family:"Garamond-Bold";font-style:normal;font-weight:800;font-display:swap;src:url('+R+') format("truetype")}@font-face{font-family:"Charmonman";font-style:normal;font-weight:400;font-display:swap;src:url('+j+') format("truetype")}@font-face{font-family:"DancingScript-Regular";font-style:normal;font-weight:400;font-display:swap;src:url('+E+') format("truetype")}body[data-v-f349ddd2]{margin:0!important;padding:0}*[data-v-f349ddd2]{font-family:"Poppins";outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;box-sizing:border-box}.pad-10[data-v-f349ddd2]{padding:6%}button[data-v-f349ddd2]{cursor:pointer;border:none;padding:1% 3%}button .icon[data-v-f349ddd2]{width:7%}button.action[data-v-f349ddd2]{background-color:#333;color:#fff;font-family:"Poppins SemiBold";font-size:16px;text-transform:uppercase;transition:all .2s ease-in-out}@media (max-width:768px){button.action[data-v-f349ddd2]{padding:2% 5%;width:100%}}button.action.delete[data-v-f349ddd2]{background-color:#9d2424;font-size:10px}button.action.delete[data-v-f349ddd2]:hover{background-color:#e01010}button.clear[data-v-f349ddd2]{background:transparent;padding:2% 5%}h1[data-v-f349ddd2],h2[data-v-f349ddd2],h3[data-v-f349ddd2],h4[data-v-f349ddd2],h5[data-v-f349ddd2],h6[data-v-f349ddd2],p[data-v-f349ddd2],span[data-v-f349ddd2]{margin:0;padding:0;color:#333}.page[data-v-f349ddd2]{min-height:80vh;padding:5%;margin-top:8vh}@media (max-width:768px){.page[data-v-f349ddd2]{padding:7%;margin-top:10vh}}.page.-wh[data-v-f349ddd2]{padding:0 0 5%}.page.side-pad[data-v-f349ddd2]{padding:2%}@media (max-width:768px){.page.-broad[data-v-f349ddd2]{padding:2%}}.page .page-header[data-v-f349ddd2]{width:100%;height:8vh;margin-bottom:20px}@media (max-width:768px){.page .page-header[data-v-f349ddd2]{height:10vw}}.page .page-header .title[data-v-f349ddd2]{color:#333;font-family:"SF-Pro SemiBold";text-transform:uppercase;font-size:1.4vw}@media (max-width:768px){.page .page-header .title[data-v-f349ddd2]{font-size:5.4vw}}.page .side-pad[data-v-f349ddd2]{padding:0 5%}@media (max-width:768px){.page .side-pad[data-v-f349ddd2]{padding:0 10%}}.center[data-v-f349ddd2],.center-col[data-v-f349ddd2]{display:flex;justify-content:center;align-items:center}.center-col[data-v-f349ddd2]{flex-direction:column}.center-space[data-v-f349ddd2]{display:flex;justify-content:space-around;align-items:center}.contents[data-v-f349ddd2]{position:relative}.white[data-v-f349ddd2]{color:#fff}.scrollable-list[data-v-f349ddd2]{display:flex;overflow-x:auto;padding:5px}@media screen and (min-width:768px){.scrollable-list[data-v-f349ddd2]{justify-content:center}}.scrollable-list[data-v-f349ddd2]::-webkit-scrollbar{display:none}.scrollable-list .list[data-v-f349ddd2]{display:flex;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.shadow[data-v-f349ddd2]{box-shadow:1px 1px 15px rgba(0,0,0,.16)}.action-complete[data-v-f349ddd2]{margin-top:10px;width:50px}[data-v-f349ddd2]::-webkit-scrollbar{display:none}p.msg[data-v-f349ddd2]{color:#fff;font-size:10px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;padding:5px;border-radius:4px;margin:10px 0}p.msg.error[data-v-f349ddd2]{background-color:#a93737}p.msg.success[data-v-f349ddd2]{background-color:#319a67}.flex[data-v-f349ddd2]{display:flex}.flex.around[data-v-f349ddd2]{justify-content:space-around}.flex.between[data-v-f349ddd2]{justify-content:space-between}.flex.evenly[data-v-f349ddd2]{justify-content:space-evenly}.flex.col[data-v-f349ddd2]{flex-direction:column}.flex.wrap[data-v-f349ddd2]{flex-wrap:wrap}.flex.center[data-v-f349ddd2]{justify-content:center}.flex.center[data-v-f349ddd2],.flex.v-center[data-v-f349ddd2]{align-items:center}.flex.start[data-v-f349ddd2]{justify-content:flex-start;align-items:flex-start}.flex.start.center[data-v-f349ddd2]{align-items:center}.flex.baseline[data-v-f349ddd2]{align-items:baseline}.flex.end[data-v-f349ddd2]{justify-content:flex-end}.flex.end.center[data-v-f349ddd2]{align-items:center}.checkout-page[data-v-f349ddd2]{margin-top:12vh}.checkout-page .title[data-v-f349ddd2]{font-size:30px!important}.order-overview[data-v-f349ddd2]{width:100%;justify-content:space-around;align-items:flex-start}.order-overview .cart-items[data-v-f349ddd2]{width:50%}.order-overview .d-o-p[data-v-f349ddd2]{width:30%}.order-overview .d-o-p .delivery-address[data-v-f349ddd2],.order-overview .d-o-p .order-total-container[data-v-f349ddd2]{width:100%}@media (max-width:768px){.order-overview[data-v-f349ddd2]{flex-direction:column}.order-overview .cart-items[data-v-f349ddd2]{width:100%}.order-overview .d-o-p[data-v-f349ddd2]{width:100%;padding:0 20px}}.order-overview .section-heading[data-v-f349ddd2]{text-transform:uppercase;font-family:"SF-Pro";font-size:20px;margin:10px 0}.order-overview .delivery-address[data-v-f349ddd2]{margin-top:20px;width:80%;position:relative;background:#fff;padding:3%;display:flex;flex-direction:column;box-shadow:1px 1px 15px rgba(0,0,0,.16)}.order-overview .delivery-address span[data-v-f349ddd2]{font-family:"SF-Pro";font-size:14px;margin:2px 0}.order-overview .delivery-address span.name[data-v-f349ddd2]{font-family:"Poppins Bold";font-weight:900}.order-overview .note[data-v-f349ddd2]{background-color:#32a77c;color:#fff;padding:4px 10px;font-size:12px;font-family:"Poppins";text-align:center}.order-overview .error[data-v-f349ddd2]{width:80%}.order-overview .payment-title[data-v-f349ddd2]{margin-top:20px}.order-overview #stripe-mount[data-v-f349ddd2]{margin-top:20px;width:100%;background-color:#fff;box-shadow:1px 1px 15px rgba(0,0,0,.16);padding:3%}.payment-specific[data-v-f349ddd2]{width:100%}.checkout-btn[data-v-f349ddd2]{width:100%;margin-top:20px}.checkout-btn.disabled[data-v-f349ddd2]{background-color:grey}',""]),e.exports=t},695:function(e,t,r){"use strict";r.r(t);r(44),r(249),r(23);var d=r(2),n=r(157),o=r(99),c=r.n(o),l="https://js.stripe.com/v3",f=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,m="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",v=null,h=function(e){return null!==v?v:v=new Promise((function(t,r){if("undefined"!=typeof window)if(window.Stripe&&e&&console.warn(m),window.Stripe)t(window.Stripe);else try{var script=function(){for(var e=document.querySelectorAll('script[src^="'.concat(l,'"]')),i=0;i<e.length;i++){var script=e[i];if(f.test(script.src))return script}return null}();script&&e?console.warn(m):script||(script=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",script=document.createElement("script");script.src="".concat(l).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(script),script}(e)),script.addEventListener("load",(function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))})),script.addEventListener("error",(function(){r(new Error("Failed to load Stripe.js"))}))}catch(e){return void r(e)}else t(null)}))},y=function(e,t,r){if(null===e)return null;var d=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.15.1",startTime:t})}(d,r),d},w=Promise.resolve().then((function(){return h(null)})),x=!1;w.catch((function(e){x||console.warn(e)}));var _=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];x=!0;var d=Date.now();return w.then((function(e){return y(e,t,d)}))},C={head:function(){return{title:"Checkout | Bounipun Kashmir"}},mounted:function(){this.$store.state.customer.authorized&&(this.setKeys(),this.$store.dispatch("customer/fetchCart"),this.$store.dispatch("customer/fetchCoupon",this.coupon.code),this.$store.dispatch("customer/fetchGlobalConfig"),this.cartEmpty?this.$router.push("/"):"INR"!==this.currency.trim()&&this.initializeStripe())},data:function(){return{deliveryAddress:this.$route.params.deliveryAddress,remoteCartItems:this.$store.state.customer.globalRemoteCart,razorpayCheckout:null,stripe:null,paymentIntentId:"",paymentError:{status:!1,msg:""},gatewayToken:"",enableCheckout:!1,elements:null,orderDetails:{},combinedDeliveryConsent:!0,razorpayKeyId:"",stripePK:""}},computed:{currency:function(){return this.$store.state.customer.currency+" "},cartEmpty:function(){return 0===this.$store.state.customer.globalRemoteCart.length},subTotal:function(){var e=this;return c()(this.$store.state.customer.globalRemoteCart,(function(t){return e.adjustPrice(t.price)*t.quantity}))},coupon:function(){return this.$store.state.customer.coupon},gatewayName:function(){return"INR"===this.currency.trim()?"razorpay":"stripe"},stripeBillingAddress:function(){return{name:this.deliveryAddress.firstName+" "+this.deliveryAddress.surName,email:this.deliveryAddress.email,address:{city:this.deliveryAddress.city,line1:this.deliveryAddress.addressLine1+" | "+this.deliveryAddress.addressLine2,postal_code:this.deliveryAddress.postalCode,country:this.deliveryAddress.countryIsoCode}}},stripeShippingObject:function(){return{address:{line1:this.deliveryAddress.addressLine1+" "+this.deliveryAddress.addressLine2,country:this.deliveryAddress.countryIsoCode},name:this.deliveryAddress.firstName+" "+this.deliveryAddress.surName}},maximumShippingTime:function(){var e=this.$store.state.customer.globalRemoteCart.map((function(e){return e.shippingTime})),t=Math.max.apply(Math,Object(n.a)(e));return t}},methods:{setKeys:function(){switch(window.location.hostname){case"bounipun.in":this.razorpayKeyId="rzp_live_bzpnf6YPxKKfTh",this.stripePK="pk_live_51J0qm7SAJnKcquR3JZ1T9qVG8lGA4bIflVcp5TZFWYP06n6XPLWojyNYUc5PMUFEwWCoe62IHW9HsnebRlpl5Scw00LC38Ktxu";break;default:this.razorpayKeyId="rzp_test_LnJPEC0MOtvlSn",this.stripePK="pk_test_51J0qm7SAJnKcquR3vsOUPap0r0P1vwuEA75yfexoRqRRouVuc2uagePU0RZOPFCDK6VNAhgHOSnzJOfRYo78YUhQ00C4FhrbSV"}},adjustPrice:function(e){return e=parseInt(e),this.$store.getters["customer/adjustPrice"](e)},initializeStripe:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var element;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e.stripePK);case 2:e.stripe=t.sent,e.elements=e.stripe.elements(),(element=e.elements.create("card",{hidePostalCode:!0})).on("change",(function(t){e.paymentError.status=!1,t.complete?e.enableCheckout=!0:e.enableCheckout=!1})),element.mount("#stripe-mount");case 7:case"end":return t.stop()}}),t)})))()},onPaymentIntentCreated:function(details){this.paymentIntentId=details.intentId,this.gatewayToken=details.gatewayToken,"razorpay"===this.gatewayName&&this.setupRazorpayOrder(details.gatewayToken,details.amount)},setupRazorpayOrder:function(e,t){var r,n=this,o={key:this.razorpayKeyId,amount:t,currency:"INR",name:"Bounipun Ecom",description:"Test Transaction",image:"https://example.com/your_logo",order_id:e,handler:(r=Object(d.a)(regeneratorRuntime.mark((function e(t){var r,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),r=t.razorpay_order_id,d=t.razorpay_payment_id,t.razorpay_signature,e.next=4,n.$post("/razorpayPaymentSuccess",{razorpay_order_id:r,transactionId:d});case 4:if(!1!==e.sent.resolved){e.next=7;break}return e.abrupt("return");case 7:n.$store.dispatch("customer/fetchCart"),n.$router.push("/order-placed-successfully");case 9:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)}),prefill:{name:this.deliveryAddress.firstName+" "+this.deliveryAddress.surName,email:this.deliveryAddress.email,contact:this.deliveryAddress.mobileNumber},theme:{color:"#3399cc"}};this.razorpayCheckout=new Razorpay(o),this.enableCheckout=!0},placeOrder:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.enableCheckout){t.next=2;break}return t.abrupt("return",!1);case 2:return"INR"===e.currency.trim()?e.razorpayCheckout.open():e.stripeCheckout(),t.abrupt("return");case 4:case"end":return t.stop()}}),t)})))()},stripeCheckout:function(){var e=this;return Object(d.a)(regeneratorRuntime.mark((function t(){var r,d,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.elements.getElement("card"),t.next=3,e.stripe.createPaymentMethod({type:"card",card:r,billing_details:e.stripeBillingAddress});case 3:if(d=t.sent,n=d.paymentMethod,!d.error){t.next=11;break}return console.log("could not process payment method request"),e.paymentError.msg="Could not process payment. Kindly try after sometime.",e.paymentError.status=!0,t.abrupt("return");case 11:return console.log(n),t.next=14,e.stripe.confirmCardPayment(e.gatewayToken,{payment_method:n.id,shipping:e.stripeShippingObject});case 14:if(o=t.sent,!(c=o.error)){t.next=22;break}return console.log("could not process STRIPE PAYMENT"),console.log(c),e.paymentError.msg="We are facing some technical difficulties at the moment. Kindly, try again after sometime.",e.paymentError.status=!0,t.abrupt("return");case 22:e.$store.dispatch("customer/fetchCart"),e.$router.push("/order-placed-successfully");case 24:case"end":return t.stop()}}),t)})))()}}},k=(r(578),r(7)),component=Object(k.a)(C,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"checkout-page page -wh"},[e._m(0),e._v(" "),r("div",{staticClass:"order-overview flex center"},[r("div",{staticClass:"cart-items flex center col"},[r("h3",{staticClass:"section-heading"},[e._v("Products")]),e._v(" "),e._l(e.$store.state.customer.globalRemoteCart,(function(e,t){return r("CartItem",{key:t,attrs:{item:e,allowUpdate:!1}})}))],2),e._v(" "),r("div",{staticClass:"d-o-p flex center col"},[r("h3",{staticClass:"section-heading"},[e._v("Delivery Address")]),e._v(" "),r("div",{staticClass:"delivery-address"},[r("span",{staticClass:"name"},[e._v("\n          "+e._s(e.deliveryAddress.firstName)+" "+e._s(e.deliveryAddress.surName)+"\n        ")]),e._v(" "),r("span",[e._v(" "+e._s(e.deliveryAddress.mobileNumber)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.deliveryAddress.addressLine1))]),e._v(" "),r("span",[e._v(" "+e._s(e.deliveryAddress.addressLine2)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.deliveryAddress.city)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.deliveryAddress.postalCode)+" ")])]),e._v(" "),r("div",{staticClass:"order-total-container"},[e.cartEmpty?e._e():r("OrderTotal",{attrs:{deliveryAddress:e.deliveryAddress,initializeCheckout:!0},on:{paymentIntentCreated:e.onPaymentIntentCreated}})],1),e._v(" "),r("div",{staticClass:"payment-specific flex center col"},[e.$store.state.customer.combinedDeliveryConsent?r("p",{staticClass:"note"},[e._v("\n          Combined Standard shipping for the whole order:\n          "+e._s(e.maximumShippingTime)+" weeks\n        ")]):e._e(),e._v(" "),"stripe"===e.gatewayName?r("h2",{staticClass:"payment-title"},[e._v("\n          Payment Information\n        ")]):e._e(),e._v(" "),"stripe"===e.gatewayName?r("div",{attrs:{id:"stripe-mount"}}):e._e(),e._v(" "),e.paymentError.status?r("p",{staticClass:"msg error"},[e._v("\n          "+e._s(e.paymentError.msg)+"\n        ")]):e._e(),e._v(" "),r("button",{staticClass:"action checkout-btn",class:{disabled:!e.enableCheckout},on:{click:e.placeOrder}},[e._v("\n          Place Order\n        ")])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page-header center"},[t("h2",{staticClass:"title"},[this._v("Checkout")])])}],!1,null,"f349ddd2",null);t.default=component.exports;installComponents(component,{CartItem:r(566).default,OrderTotal:r(507).default})}}]);