(window.webpackJsonp=window.webpackJsonp||[]).push([[123,34],{499:function(t,e,r){},502:function(t,e,r){},506:function(t,e,r){"use strict";r(499)},511:function(t,e,r){"use strict";r.r(e);var n=r(3),o=r(23);r(22),r(496),r(34),r(168),r(40),r(13),r(33),r(32),r(24),r(53),r(54);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var l={data:function(){return{cursor:1,totalMatches:0}},props:{model:String,rawCriterion:{search:{key:String,term:String},filters:Object,sortBy:Object,limit:Number},requestedBy:{type:String,default:"default"}},watch:{rawCriterion:{handler:function(){this.cursor=1,this.fetchResults()},deep:!0}},mounted:function(){this.fetchResults()},computed:{rawCriterionComputed:function(){return{search:this.rawCriterion.search,filters:this.filterCriteria,sortBy:this.sortByCriteria,cursor:this.cursor,limit:this.rawCriterion.limit}},totalPages:function(){return Math.ceil(this.totalMatches/this.rawCriterion.limit)},sortByCriteria:function(){var t=this,e={};return Object.keys(this.rawCriterion.sortBy).forEach((function(r){var n=t.rawCriterion.sortBy[r];n.active&&(e[r]=n.order)})),e},filterCriteria:function(){var t=this,e=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},this.rawCriterion.filters);return Object.keys(e).forEach((function(r){"default"===t.rawCriterion.filters[r]&&delete e[r]})),e}},methods:{getPage:function(t){this.cursor=t,this.fetchResults()},fetchResults:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={search:t.rawCriterion.search,filters:t.filterCriteria,sortBy:t.sortByCriteria,cursor:t.cursor,limit:t.rawCriterion.limit},e.next=3,t.$fetchPaginatedResults(t.model,r,t.requestedBy);case 3:if(n=e.sent,t.totalMatches=n.totalMatches,console.log(t.totalMatches,"--total matches"),n.fetched&&0!==n.docs.length){e.next=9;break}return t.$emit("resultsFetched",n),e.abrupt("return");case 9:t.$emit("resultsFetched",n);case 10:case"end":return e.stop()}}),e)})))()}}},f=l,d=(r(506),r(9)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sw-pagination"},[t.totalMatches>0?r("div",{staticClass:"pagination-bar"},[r("span",{staticClass:"total-matches"},[t._v(" Total matches: "+t._s(t.totalMatches)+" ")]),t._v(" "),t.totalPages>1?r("div",t._l(this.totalPages,(function(e,n){return r("button",{key:n,class:e==t.cursor?"current-page page-no":"page-no",on:{click:function(r){return t.getPage(e)}}},[t._v(" "+t._s(e)+" ")])})),0):t._e()]):t._e()])}),[],!1,null,"a8aa6bc2",null);e.default=component.exports},513:function(t,e,r){"use strict";r(502)},514:function(t,e,r){"use strict";r.r(e);var n={props:{label:{type:String,default:"Item"}}},o=(r(513),r(9)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"center-col add-new"},[r("img",{attrs:{src:"/icons/addition-sign.png"},on:{click:function(e){return t.$emit("showForm")}}}),t._v(" "),r("button",{staticClass:"action",on:{click:function(e){return t.$emit("showForm")}}},[t._v(" Add New "+t._s(t.label)+" ")])])}),[],!1,null,"36d0fd2a",null);e.default=component.exports},787:function(t,e,r){"use strict";r.r(e);r(40),r(32),r(53),r(54);var n=r(23),o=r(3),c=(r(47),r(28),r(13),r(33),r(265),r(41),r(24),r(64),r(22),r(560));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={layout:"admin",data:function(){return{showForm:!1,loading:!1,model:"products",productTypes:[{name:"All Products",value:"default"},{name:"Under Bounipun",value:"under-bounipun"},{name:"Third Party",value:"third-party"}],searchBy:[{name:"Product Name",value:"name"},{name:"Style ID",value:"styleId"}],availabilityTypes:[{name:"Select Type",value:"default"},{name:"Ready To Ship",value:"ready-to-ship"},{name:"Made To Order",value:"made-to-order"}],rawCriterion:{search:{key:"name",term:""},filters:{type:"default",bounipun_collection:"default",availabilityType:"default"},sortBy:{styleId:{active:!0,order:1}},limit:10},list:[],headings:["_id","styleId","name","colors","preview","availabilityType","Collection","status"],sortByFields:["name","styleId","availabilityType","status"],collections:[],variants:[],fabrics:[],actions:[{name:"Mark as Active",type:"active"},{name:"Mark as Inactive",type:"inactive"},{name:"Club RTS",type:"club-rts"}]}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchBounipunCollections();case 2:return e.next=4,t.fetchVariants();case 4:return e.next=6,t.fetchFabrics();case 6:case"end":return e.stop()}}),e)})))()},methods:{updateList:function(){this.$refs.pagination.fetchResults()},sortToggled:function(t){console.log(t),this.rawCriterion=f(f({},this.rawCriterion),{},{sortBy:t})},fetchFabrics:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchCollection("fabrics");case 2:r=e.sent,t.fabrics=r.docs.map((function(t){var e=t._id;return{name:t.name,value:e,code:t.code,info1:t.info1,_id:e,checked:!1,price:"",pricing:{}}}));case 4:case"end":return e.stop()}}),e)})))()},fetchVariants:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchCollection("variants","admin");case 2:r=e.sent,t.variants=r.docs.map((function(t){var e=t._id;return{name:t.name,_id:e,code:t.code,category:t.category,value:e,checked:!1}}));case 4:case"end":return e.stop()}}),e)})))()},resetVariants:function(){this.variants.forEach((function(t){return t.checked=!1}))},fetchBounipunCollections:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchCollection("collections");case 2:if(r=e.sent,t.collections=r.docs.map((function(t){var e=t._id;return{name:t.name,value:e,inflationPercentage:t.inflationPercentage}})),t.collections.unshift({name:"Select Collection",value:"default",inflationPercentage:0}),0!==t.list.length){e.next=7;break}return e.abrupt("return");case 7:t.list=t.list.map((function(e){var r=t.collections.find((function(col){return col.value===e.bounipun_collection})),n=void 0!==r?r.name:"Third Party";return e.bounipun_collection="third-party"!==e.type?n:"N/A",e}));case 8:case"end":return e.stop()}}),e)})))()},documentFetched:function(t){var e=this;this.showForm=!0,this.editMode=!0,console.log(t,"--fetched document"),setTimeout((function(){return e.populateForm(t)}),1500)},populateForm:function(t){var e=this.$refs.updateComponent;e.populateForm(t),0!==t.colors.length&&(t.colors.forEach((function(t){t.key=Object(c.a)()})),"bounipun-colors"===t.colorSource&&e.$refs.colorPicker.populateColorSelection(t.colors)),setTimeout((function(){var i=0;t.colors.forEach((function(t){0!==t.images.length?(e.$refs.imageUploader[i].assignImages(t.images),i++):i++}))}),10),0!==t.variants.length&&(e.populateVariants(t.variants),setTimeout((function(){t.variants.forEach((function(t){if(0!==t.fabrics.length){var r="fabricSelector".concat(t._id);e.$refs[r][0].populateFabricSelection(t)}}))}),13))},resultsFetched:function(t){var e=this;0!==t.docs.length?this.list=t.docs.map((function(t){var r=t._id,n=t.styleId,o=t.name,c=t.colors,l=t.availabilityType,f=t.bounipun_collection,d=t.status;if(0!==e.collections.length){var h=e.collections.find((function(col){return col.value===f}));f=void 0!==h?h.name:"NOT AVAILABLE"}var m=c.filter((function(t){return t.status})),v="";try{var y=c[0].images[0].path;console.log(y),v=e.$getOriginalPath(y)}catch(t){console.log("something went wrong")}return{_id:r,styleId:n,name:o,colors:"ðŸŸ¢ ".concat(m.length," /  ").concat(c.length),preview:v,availabilityType:l,bounipun_collection:""!==f&&void 0!==f?f:"N/A",status:d}})):this.list=[]}}},h=r(9),component=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"products crud"},[r("div",{staticClass:"filters center",class:{updating:t.showForm}},[r("SelectBox",{attrs:{options:t.searchBy,label:"Search By"},model:{value:t.rawCriterion.search.key,callback:function(e){t.$set(t.rawCriterion.search,"key",e)},expression:"rawCriterion.search.key"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.rawCriterion.search.term,expression:"rawCriterion.search.term"}],staticClass:"search shadow",attrs:{type:"text",placeholder:"Search for Products"},domProps:{value:t.rawCriterion.search.term},on:{input:function(e){e.target.composing||t.$set(t.rawCriterion.search,"term",e.target.value)}}}),t._v(" "),r("SelectBox",{attrs:{options:t.productTypes,label:"Filter By"},model:{value:t.rawCriterion.filters.type,callback:function(e){t.$set(t.rawCriterion.filters,"type",e)},expression:"rawCriterion.filters.type"}}),t._v(" "),r("SelectBox",{attrs:{options:t.collections,label:"Collection"},model:{value:t.rawCriterion.filters.bounipun_collection,callback:function(e){t.$set(t.rawCriterion.filters,"bounipun_collection",e)},expression:"rawCriterion.filters.bounipun_collection"}}),t._v(" "),r("SelectBox",{attrs:{options:t.availabilityTypes,label:"Availability"},model:{value:t.rawCriterion.filters.availabilityType,callback:function(e){t.$set(t.rawCriterion.filters,"availabilityType",e)},expression:"rawCriterion.filters.availabilityType"}})],1),t._v(" "),r("div",{staticClass:"list",class:{updating:t.showForm}},[r("List",{ref:"list",attrs:{list:t.list,model:t.model,actions:t.actions,headings:t.headings,custom_css:"5% 10% 25% 10% 15% 10% 15% 10%",sortByFields:t.sortByFields},on:{documentFetched:t.documentFetched,sortToggled:t.sortToggled,updated:t.updateList}}),t._v(" "),r("Pagination",{ref:"pagination",attrs:{model:t.model,rawCriterion:t.rawCriterion},on:{resultsFetched:t.resultsFetched}})],1),t._v(" "),r("div",{staticClass:"update",class:{updating:t.showForm}},[t.showForm?r("UpdateProduct",{ref:"updateComponent",attrs:{model:t.model,collections:t.collections,variants:t.variants,fabrics:t.fabrics},on:{updated:t.updateList,close:function(e){t.showForm=!1},resetVariants:t.resetVariants}}):t._e(),t._v(" "),t.showForm?t._e():r("AddNewItem",{attrs:{label:"Product"},on:{showForm:function(e){t.showForm=!0}}})],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SelectBox:r(521).default,List:r(525).default,Pagination:r(511).default,UpdateProduct:r(739).default,AddNewItem:r(514).default})}}]);