(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{607:function(t,e,c){},674:function(t,e,c){"use strict";c(607)},752:function(t,e,c){"use strict";c.r(e);c(40),c(53),c(54);var o=c(3),r=c(23);c(22),c(28),c(13),c(33),c(24),c(540),c(76),c(32),c(56);function n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(object);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,c)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={head:function(){return{title:"".concat(this.collection.name," | Bounipun Kashmir")}},components:{productCard:c(542).default},data:function(){return{products:[],collection:{name:"fetching..."},colorCategories:[],escapeProduct:[]}},watch:{$route:function(t,e){this.products=[],this.escapeProduct=[],this.colorCategories=[],this.collection={},this.fetchCollectionProducts(t.query.slug)}},computed:{collectionLocked:function(){return void 0!==this.collection.lock&&this.collection.lock}},mounted:function(){this.fetchCollectionProducts(this.$route.query.slug)},methods:{adjustProduct:function(t,e){var c=l({},t);return c.name=c.colors[e].name,l({},c)},fetchColorCategories:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchData("color_categories",{},!0);case 2:if((c=e.sent).fetched){e.next=6;break}return console.log("could not fetch color categories"),e.abrupt("return");case 6:t.colorCategories=c.docs;case 7:case"end":return e.stop()}}),e)})))()},fetchCollectionProducts:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function c(){var o,r;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.$fetchData("collections",{slug:t,status:!0});case 2:if((o=c.sent).fetched){c.next=5;break}return c.abrupt("return");case 5:if(e.collection=o.doc,"Escape"!==e.collection.name){c.next=9;break}return c.next=9,e.fetchColorCategories();case 9:return c.next=11,e.$fetchData("products",{bounipun_collection:o.doc._id,type:"under-bounipun",status:!0},!0);case 11:if((r=c.sent).fetched){c.next=14;break}return c.abrupt("return");case 14:r.docs.forEach((function(t){t.colors=t.colors.filter((function(t){return!0===t.status})),t.variants.sort((function(a,b){return a._id.order-b._id.order}))})),r.docs=r.docs.filter((function(t){return t.colors.length>0})),r.docs.forEach((function(t){"ready-to-ship"===t.availabilityType&&"third-party"!==t.type&&void 0!==t.rtsDirectVariant&&(t.rtsDirectVariant=t.rtsDirectVariant.name)})),e.products=r.docs,"Escape"===e.collection.name&&e.sortEscape(e.products);case 19:case"end":return c.stop()}}),c)})))()},sortEscape:function(t){var e=t[0],c=[];this.colorCategories.forEach((function(t){e.colors=e.colors.filter((function(t){return!0===t.status}));var o=e.colors.filter((function(c){return c.actualIndex=e.colors.findIndex((function(col){return col._id===c._id})),c._id.category===t._id}));c.push({name:t.name,description:t.description,colors:o})})),this.escapeProduct=c},getCollectionImage:function(image){return void 0===image?"/default-image.png":this.$getOriginalPath(image)}}},f=(c(674),c(9)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"center-col page -wh"},[c("div",{staticClass:"c-header center",style:{backgroundImage:"url("+t.getCollectionImage(t.collection.image)+")"}},[""===t.collection.image?c("h2",{staticClass:"heading"},[t._v("\n      "+t._s(t.collection.name)+"\n    ")]):t._e()]),t._v(" "),void 0!==t.collection.mainTextBlock&&t.collection.mainTextBlock.visible?c("div",{staticClass:"main-text-block center-col pad"},[c("h2",{staticClass:"text-1"},[t._v(t._s(t.collection.mainTextBlock.text1))]),t._v(" "),c("p",{staticClass:"text-2"},[t._v(t._s(t.collection.mainTextBlock.text2))]),t._v(" "),c("p",{staticClass:"text-3"},[t._v(t._s(t.collection.mainTextBlock.text3))])]):t._e(),t._v(" "),t.collectionLocked||"Escape"===t.collection.name?t._e():c("div",{staticClass:"collection-items"},[t._l(t.products,(function(t,e){return c("product-card",{key:e,attrs:{product:t}})})),t._v(" "),0===t.products.length?c("h3",[t._v("\n      fetching products for "+t._s(t.collection.name)+"\n    ")]):t._e()],2),t._v(" "),t.collectionLocked||"Escape"!==t.collection.name?t._e():c("div",t._l(t.escapeProduct,(function(e,o,r){return c("div",{key:r,staticClass:"color-categories"},[0!==e.length?c("div",[c("h5",{staticClass:"category-heading"},[t._v(t._s(e.name))]),t._v(" "),c("p",{staticClass:"category-description"},[t._v(t._s(e.description))]),t._v(" "),c("div",{staticClass:"collection-items"},t._l(e.colors,(function(e,o){return c("product-card",{key:o,attrs:{product:t.adjustProduct(t.products[0],e.actualIndex),activeColor:e.actualIndex}})})),1)]):t._e()])})),0),t._v(" "),t.collectionLocked?c("div",{staticClass:"locked"},[t.collectionLocked?c("h2",{staticClass:"heading"},[t._v("\n      ðŸ”’ This collection is locked\n    ")]):t._e(),t._v(" "),c("br"),t._v(" "),c("button",{staticClass:"action"},[t._v("Request Access")])]):t._e()])}),[],!1,null,"556b7e24",null);e.default=component.exports;installComponents(component,{ProductCard:c(542).default})}}]);