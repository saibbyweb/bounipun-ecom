(window.webpackJsonp=window.webpackJsonp||[]).push([[85,35,41,44,45,52,57],{496:function(e,t,r){"use strict";var n=r(15),o=r(2),c=r(5),l=r(92),d=r(25),m=r(20),f=r(167),v=r(55),h=r(129),C=r(261),y=r(7),_=r(74).f,x=r(48).f,k=r(21).f,N=r(263),I=r(262).trim,S="Number",w=o.Number,A=w.prototype,$=o.TypeError,D=c("".slice),E=c("".charCodeAt),T=function(e){var t=C(e,"number");return"bigint"==typeof t?t:O(t)},O=function(e){var t,r,n,o,c,l,d,code,m=C(e,"number");if(h(m))throw $("Cannot convert a Symbol value to a number");if("string"==typeof m&&m.length>2)if(m=I(m),43===(t=E(m,0))||45===t){if(88===(r=E(m,2))||120===r)return NaN}else if(48===t){switch(E(m,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+m}for(l=(c=D(m,2)).length,d=0;d<l;d++)if((code=E(c,d))<48||code>o)return NaN;return parseInt(c,n)}return+m};if(l(S,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var L,P=function(e){var t=arguments.length<1?0:w(T(e)),r=this;return v(A,r)&&y((function(){N(r)}))?f(Object(t),r,P):t},B=n?_(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;B.length>M;M++)m(w,L=B[M])&&!m(P,L)&&k(P,L,x(w,L));P.prototype=A,A.constructor=P,d(o,S,P)}},515:function(e,t,r){},522:function(e,t,r){"use strict";r(515)},524:function(e,t,r){"use strict";r.r(t);var n={props:{label:String,value:String,type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},clearError:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},isMobileNumber:{type:Boolean,default:!1},isUnlocker:{type:Boolean,default:!1},placeholder:{type:String,default:""},textarea:{type:Boolean,default:!1},countryDialCode:String,error:{status:Boolean,msg:String}},data:function(){return{}},methods:{emitInput:function(e){this.$emit("input",e.target.value),this.clearError&&void 0!==this.$parent.error&&(this.$parent.error.status=!1)}}},o=(r(522),r(9)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-credential"},[r("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),r("div",{staticClass:"input-box"},[e.isMobileNumber?r("div",{staticClass:"country-code"},[e._v("\n      "+e._s(e.countryDialCode)+"\n    ")]):e._e(),e._v(" "),e.checked?r("div",{staticClass:"checked flex center"},[r("img",{attrs:{src:"/icons/simple_green_check.png"}})]):e._e(),e._v(" "),r("input",{staticClass:"field",class:{isMobileNumber:e.isMobileNumber,uppercase:e.uppercase,textarea:e.textarea,isUnlocker:e.isUnlocker},attrs:{type:e.type,disabled:e.disabled,placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.emitInput}})])])}),[],!1,null,"933e9e40",null);t.default=component.exports},529:function(e,t,r){"use strict";t.a={computed:{currency:function(){return this.$store.state.customerV2.currency},currencyIsINR:function(){return"INR"===this.currency}},methods:{formatCurrency:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=parseFloat(e),this.$store.getters["customerV2/formatCurrency"](e,t)}}}},537:function(e,t,r){},539:function(e,t,r){},544:function(e,t,r){r(264),r(267),r(34),r(94),String.prototype.isEmpty=function(){return""===this.trim()},String.prototype.hasOnlyAlphabets=function(){return new RegExp("^[a-zA-Z ]+$").test(this)},String.prototype.hasOnlyNumbers=function(){return/^\d+$/.test(this)},String.prototype.isValidEmail=function(){return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(this)},String.prototype.lengthIsLessThan=function(e){return this.length<=e}},545:function(e,t){function r(e){return"function"==typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function n(e){return void 0!==e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,t,o){if(!r(t))return;function c(t){if(o.context){var r=t.path||t.composedPath&&t.composedPath();r&&r.length>0&&r.unshift(t.target),e.contains(t.target)||function(e,t){if(!e||!t)return!1;for(var i=0,r=t.length;i<r;i++)try{if(e.contains(t[i]))return!0;if(t[i].contains(e))return!1}catch(e){return!1}return!1}(o.context.popupItem,r)||e.__vueClickOutside__.callback(t)}}e.__vueClickOutside__={handler:c,callback:t.value};const l="ontouchstart"in document.documentElement?"touchstart":"click";!n(o)&&document.addEventListener(l,c)},update:function(e,t){r(t)&&(e.__vueClickOutside__.callback=t.value)},unbind:function(e,t,r){const o="ontouchstart"in document.documentElement?"touchstart":"click";!n(r)&&e.__vueClickOutside__&&document.removeEventListener(o,e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}},546:function(e,t,r){"use strict";r(537)},549:function(e,t,r){"use strict";r.r(t);r(24),r(13),r(170),r(28);var n=r(78),o=r(545),c={directives:{ClickOutside:r.n(o).a},props:{lock:{type:Boolean,default:!0},adminMode:{type:Boolean,default:!1}},data:function(){return{countryCodes:n.a,selectedCountryIndex:this.$store.state.customer.countryIndex,countrySearchTerm:"",showCountrySelect:!1}},mounted:function(){if(this.adminMode)return this.$emit("input","+91"),this.$emit("setCountryIsoCode","IN"),void(this.selectedCountryIndex=90);this.$emit("input",this.selectedCountryCode),this.$emit("setCountryIsoCode",this.selectedCountryIsoCode)},watch:{selectedCountryCode:function(e){this.$emit("input",e),this.$emit("setCountryIsoCode",this.selectedCountryIsoCode)},customerCountryIndex:function(e){this.selectedCountryIndex=e}},computed:{customerCountryIndex:function(){return this.$store.state.customer.countryIndex},selectedCountry:function(){return 0===this.matchedCountries.length?"":this.matchedCountries[this.selectedCountryIndex]},selectedCountryCode:function(){return 0===this.matchedCountries.length?"":this.matchedCountries[this.selectedCountryIndex].dialCode},selectedCountryIsoCode:function(){return 0===this.matchedCountries.length?"":this.matchedCountries[this.selectedCountryIndex].isoCode},matchedCountries:function(){var e=this;return""===this.countrySearchTerm?this.countryCodes:(this.selectedCountryIndex=0,this.countryCodes.filter((function(t){return t.name.toUpperCase().startsWith(e.countrySearchTerm.toUpperCase())})))}},methods:{showCountrySelectList:function(){this.lock||(this.showCountrySelect=!0)},hideCountries:function(){this.showCountrySelect=!1},selectCountry:function(e){this.selectedCountryIndex=e,this.showCountrySelect=!1}}},l=(r(546),r(9)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return 0!==e.countryCodes.length?r("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.hideCountries,expression:"hideCountries"}],staticClass:"country-select"},[r("div",{staticClass:"selected-country",class:{focused:e.showCountrySelect,adminMode:e.adminMode},on:{click:e.showCountrySelectList}},[r("img",{attrs:{src:e.selectedCountry.flag}}),e._v(" "),r("span",[e._v(" "+e._s(e.selectedCountry.name)+" ")]),e._v(" "),""!==e.selectedCountry?r("span",{staticStyle:{"margin-left":"4px"}},[e._v("\n      ("+e._s(e.selectedCountry.dialCode)+")\n    ")]):e._e()]),e._v(" "),e.showCountrySelect?r("div",{staticClass:"country-list"},[r("div",{staticClass:"search"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.countrySearchTerm,expression:"countrySearchTerm",modifiers:{trim:!0}}],staticClass:"field",attrs:{type:"text",placeholder:"Enter Country Name",autocomplete:"new-password"},domProps:{value:e.countrySearchTerm},on:{input:function(t){t.target.composing||(e.countrySearchTerm=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),e._l(e.matchedCountries,(function(t,n){return r("div",{key:t.isoCode,staticClass:"item",on:{click:function(t){return e.selectCountry(n)}}},[r("img",{attrs:{src:t.flag}}),e._v(" "),r("span",[e._v(" "+e._s(t.name)+" ")]),e._v(" "),r("span",{staticStyle:{"margin-left":"4px"}},[e._v(" ("+e._s(t.dialCode)+") ")])])})),e._v(" "),0===e.matchedCountries.length?r("div",{staticClass:"no-results"},[r("span",[e._v(" No results found ")])]):e._e()],2):e._e()]):e._e()}),[],!1,null,"43ee2c0d",null);t.default=component.exports},551:function(e,t,r){},556:function(e,t,r){},557:function(e,t,r){},559:function(e,t,r){"use strict";r(539)},561:function(e,t,r){"use strict";r.r(t);var n=r(3),o=(r(22),r(41),r(268),r(264),{mixins:[r(529).a],mounted:function(){var e=this;setTimeout((function(){e.initializeCheckout&&e.createPaymentIntent()}),1e3)},props:{initializeCheckout:{type:Boolean,default:!1},deliveryAddress:Object},computed:{gatewayName:function(){return"INR"===this.currency?"razorpay":"stripe"},cartEmpty:function(){return 0===this.$store.state.customer.globalRemoteCart.length},coupon:function(){return this.$store.state.customer.coupon},couponApplied:function(){return!0===this.$store.state.customer.coupon.applied},discountValue:function(){if(!this.couponApplied)return 0;var e=0;switch(this.coupon.type){case"percentage":e=this.cartTotal*(this.coupon.value/100);break;case"direct-discount":e=this.coupon.value}return e.toFixed(2)},shippingCharge:function(){var e=this.$store.getters["customer/getTotalCartItems"],t=this.$store.getters["customer/getShippingCharge"]*e;return t.toFixed(2)},zeroShippingCharge:function(){return"0.00"===this.shippingCharge},taxes:function(){var e=this.$store.getters["customer/getTaxPercentage"];return(this.subTotal*(e/100)).toFixed(2)},zeroTaxes:function(){return"0.00"===this.taxes},subTotal:function(){var e=this.cartTotal-this.discountValue;return e.toFixed(2)},cartTotal:function(){var e=this.$store.getters["customer/getCartTotal"];return e.toFixed(2)},cartCount:function(){return this.$store.getters["customer/getCartCount"]},grandTotal:function(){var e=parseFloat(this.subTotal)+parseFloat(this.shippingCharge)+parseFloat(this.taxes);return e.toFixed(2)}},methods:{createPaymentIntent:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/createPaymentIntent",{intentType:"order",amountToBeCharged:e.grandTotal,currency:e.currency.trim(),gateway:e.gatewayName,couponCode:e.coupon.code,deliveryAddress:e.deliveryAddress,combinedDeliveryConsent:e.$store.state.customer.combinedDeliveryConsent,giftMessage:e.$store.state.customer.giftMessage});case 2:if(r=t.sent,console.log(r),!1!==r.resolved){t.next=6;break}return t.abrupt("return");case 6:e.$emit("paymentIntentCreated",r.response);case 7:case"end":return t.stop()}}),t)})))()}}}),c=(r(559),r(9)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-total"},[r("div",{staticClass:"data-point flex between"},[r("p",{staticClass:"name"},[e._v("\n      Cart Total: "),r("span",{staticClass:"count"},[e._v(" "+e._s(e.cartCount)+" Items (s) ")])]),e._v(" "),r("span",{staticClass:"value"},[e._v(" "+e._s(e.formatCurrency(e.cartTotal))+" ")])]),e._v(" "),r("hr"),e._v(" "),e.couponApplied?r("div",{staticClass:"data-point flex between"},[r("span",{staticClass:"name green"},[e._v(" Discount: ")]),e._v(" "),r("span",{staticClass:"value green small"},[e._v("\n      - "+e._s(e.formatCurrency(e.discountValue))+"\n    ")])]):e._e(),e._v(" "),e.couponApplied?r("hr"):e._e(),e._v(" "),e.couponApplied?r("div",{staticClass:"data-point flex between"},[r("span",{staticClass:"name"},[e._v(" Sub-Total: ")]),e._v(" "),r("span",{staticClass:"value"},[e._v("  "+e._s(e.formatCurrency(e.subTotal))+" ")])]):e._e(),e._v(" "),e.couponApplied?r("hr"):e._e(),e._v(" "),r("div",{staticClass:"data-point flex between"},[r("span",{staticClass:"name"},[e._v(" Shipping: ")]),e._v(" "),e.zeroShippingCharge?r("span",{staticClass:"value green small"},[e._v("\n      Free Shipping\n    ")]):r("span",{staticClass:"value small"},[e._v("\n      +"+e._s(e.formatCurrency(e.shippingCharge))+"\n    ")])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"data-point flex between"},[r("span",{staticClass:"name"},[e._v(" Taxes: ")]),e._v(" "),e.zeroTaxes?r("span",{staticClass:"value green small"},[e._v(" Tax Included ")]):r("span",{staticClass:"value small"},[e._v("\n      + "+e._s(e.taxes)+"\n    ")])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"data-point grand-total flex between"},[e._m(0),e._v(" "),r("span",{staticClass:"value"},[e._v(" "+e._s(e.formatCurrency(e.grandTotal))+" ")])])])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"name flex center col"},[e._v("\n      Grand Total: "),r("br")])}],!1,null,"862d703c",null);t.default=component.exports},563:function(e,t,r){"use strict";r(551)},570:function(e,t,r){"use strict";r(556)},571:function(e,t,r){"use strict";r(557)},582:function(e,t,r){"use strict";r.r(t);var n={props:{label:String,value:Boolean,disabled:{type:Boolean,default:!1}},methods:{emitChange:function(e){this.$emit("input",e.target.checked)}}},o=(r(563),r(9)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sw-checkbox "},[r("label",{staticClass:"label flex v-center"},[r("input",{staticClass:"checkbox",attrs:{type:"checkbox",disabled:e.disabled},domProps:{value:e.value,checked:e.value},on:{change:e.emitChange}}),e._v("\n    "+e._s(e.label)+"\n    ")])])}),[],!1,null,"6b3c6dac",null);t.default=component.exports},587:function(e,t,r){"use strict";r.r(t);var n={props:{address:{type:Object,default:{firstName:"",surName:"",countryDialCode:"",mobileNumber:"",addressLine1:"",addressLine2:"",email:"",addressType:"",state:"",city:"",postalCode:""}},onDeliveryPage:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},computed:{indianAddress:function(){return"+91"===this.$store.state.customer.user.countryDialCode}}},o=(r(570),r(9)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"address-card details",class:{onDeliveryPage:e.onDeliveryPage,active:e.active},on:{click:function(t){return e.$emit("addressSelected",e.address)}}},[r("span",{staticClass:"name"},[e._v(" "+e._s(e.address.firstName)+" "+e._s(e.address.surName)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.address.addressLine1)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.address.addressLine2)+" ")]),e._v(" "),e.indianAddress?r("span",[e._v(" "+e._s(e.address.state)+" ")]):e._e(),e._v(" "),e.indianAddress?r("span",[e._v(" "+e._s(e.address.city)+" ")]):e._e(),e._v(" "),r("span",[e._v(" "+e._s(e.address.postalCode)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.address.email)+" ")]),e._v(" "),r("span",[e._v(" "+e._s(e.address.countryDialCode)+" - "+e._s(e.address.mobileNumber)+" ")])])}),[],!1,null,"4b08109b",null);t.default=component.exports},588:function(e,t,r){"use strict";r.r(t);r(496);var n={props:{label:String,value:String,type:{type:String,default:"text"},isMobileNumber:{type:Boolean,default:!1},countryCode:String,maxLength:{type:Number,default:100},disabled:{type:Boolean,default:!1},error:{type:Object,default:{status:Boolean,msg:String}}},computed:{addressIsIndian:function(){return"+91"===this.countryCode}},data:function(){return{indianStateList:["Andaman and Nicobar Islands","Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chandigarh","Chhattisgarh","Dadra and Nagar Haveli","Daman and Diu","Delhi","Goa","Gujarat","Haryana","Himachal Pradesh","Jammu and Kashmir","Jharkhand","Karnataka","Kerala","Lakshadweep","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Orissa","Pondicherry","Punjab","Rajasthan","Sikkim","Tamil Nadu","Tripura","Uttaranchal","Uttar Pradesh","West Bengal"]}},methods:{}},o=(r(571),r(9)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.addressIsIndian||!e.addressIsIndian&&"State"!==e.label?r("div",{staticClass:"delivery-input"},[e.error.status?r("p",{staticClass:"error-msg"},[e._v(e._s(e.error.msg))]):e._e(),e._v(" "),r("div",{staticClass:"input-box"},[e.isMobileNumber?r("div",{staticClass:"country-code"},[e._v(e._s(e.countryCode))]):e._e(),e._v(" "),"select"!==e.type?r("input",{staticClass:"field",class:{error:e.error.status,isMobileNumber:e.isMobileNumber},attrs:{type:"text",autocomplete:"new-password",maxlength:e.maxLength,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}):e._e(),e._v(" "),"Address Type"===e.label?r("select",{staticClass:"selection field",domProps:{value:e.value},on:{change:function(t){return e.$emit("input",t.target.value)}}},[r("option",{attrs:{value:"Home"}},[e._v(" Home ")]),e._v(" "),r("option",{attrs:{value:"Office"}},[e._v(" Office ")]),e._v(" "),r("option",{attrs:{value:"Other"}},[e._v(" Other ")])]):e._e(),e._v(" "),"State"===e.label&&"+91"===e.countryCode?r("select",{staticClass:"field",domProps:{value:e.value},on:{change:function(t){return e.$emit("input",t.target.value)}}},e._l(e.indianStateList,(function(t,n){return r("option",{key:n,staticClass:"option",domProps:{value:t}},[e._v("\n            "+e._s(t)+"\n          ")])})),0):e._e()]),e._v(" "),r("label",{staticClass:"label",class:{error:e.error.status}},[e._v(" "+e._s(e.label)+" ")])]):e._e()}),[],!1,null,"7d393e7a",null);t.default=component.exports},609:function(e,t,r){},676:function(e,t,r){"use strict";r(609)},754:function(e,t,r){"use strict";r.r(t);var n=r(3),o=(r(13),r(33),r(40),r(22),r(544),{head:function(){return{title:"Delivery Address | Bounipun Kashmir"}},data:function(){return{formData:this.createFormData(),countryIsoCode:"",countryDialCode:"",showCountrySelect:!1,saveNewAddress:!1,showAddNewAddress:!1,activeAddressIndex:-1,otp:"",otpSent:!1,otpError:{status:!1,msg:""}}},computed:{decideCountryLock:function(){return!!this.$store.state.customer.authorized},addressList:function(){var e=this.$store.state.customer;return void 0===e.user.addressBook?[]:e.user.addressBook},addressListEmpty:function(){return 0===this.addressList.length},loggedIn:function(){return this.$store.state.customer.authorized}},mounted:function(){return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{selectAddress:function(address,e){var t=this;this.activeAddressIndex=e,this.$refs.newAddress.scrollIntoView({behavior:"smooth"}),Object.keys(this.formData).forEach((function(e){t.formData[e].value=address[e]}))},prefillForm:function(){this.formData.firstName.value="Suhaib",this.formData.surName.value="Khan",this.formData.mobileNumber.value="8082007711",this.formData.email.value="hello@saibbyweb.com",this.formData.addressLine1.value="H.no 54, Chinar Enclave, Rawalpora, Srinagar, Jammu & Kashmir",this.formData.city.value="Srinagar",this.formData.postalCode.value="190005"},fetchAddressBook:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/fetchCustomerDataPoints",{field:"addressBook"});case 2:if(!1!==t.sent.resolved){t.next=5;break}return t.abrupt("return");case 5:case"end":return t.stop()}}),t)})))()},selectCountry:function(e){this.selectedCountryIndex=e,this.showCountrySelect=!1},createFormData:function(){var e={firstName:"First Name",surName:"Sur Name",mobileNumber:"Mobile Number",email:"Email",addressType:"Address Type",state:"State",addressLine1:"Address Line #1",addressLine2:"Address Line #2",city:"City",postalCode:"Postal Code"},t={};for(var r in e)t[r]={label:e[r],value:"",type:"text",error:{status:!1,msg:""}},"addressType"===r&&(t[r].value="Home",t[r].type="select"),"state"===r&&(t[r].value="Andaman and Nicobar Islands",t[r].type="select");return t},setError:function(e,t,r){var n=this.formData[e];t&&(n.error={status:!0,msg:r})},validateForm:function(){var e=this,t=["firstName","surName","mobileNumber","email","addressLine1","city","postalCode"];["firstName","surName"].forEach((function(t){var r=e.formData[t].value.hasOnlyAlphabets();e.setError(t,!r,"Only Alphabets are allowed!")}));var r=this.formData.mobileNumber,n=r.value.hasOnlyNumbers();this.setError("mobileNumber",!n,"Mobile number can only consist of digits");var o=r.value.length>3&&r.value.length<15;this.setError("mobileNumber",!o,"Please enter a valid mobile number");var c=this.formData.email.value.isValidEmail();this.setError("email",!c,"Please enter a valid email address");var l=this.formData.city.value.hasOnlyAlphabets();this.setError("city",!l,"Only Alphabets are allowed");var d=this.formData.postalCode.value.hasOnlyNumbers();this.setError("postalCode",!d,"Only Number are allowed"),t.forEach((function(t){var r=e.formData[t].value.isEmpty();e.setError(t,r,"This field cannot be left blank!")}));var m=t.every((function(t){return console.log(e.formData[t].error.status,t),!e.formData[t].error.status}));return console.log(m,"--validated"),m},sendOtp:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/sendOtp",{countryDialCode:e.countryDialCode,phoneNumber:e.formData.mobileNumber.value,purpose:"registration-on-checkout"});case 2:if(r=t.sent,n=r.response,!1!==r.resolved){t.next=8;break}return console.log("send otp not resolved"),t.abrupt("return");case 8:e.otpSent=!0===n.otpSent;case 9:case"end":return t.stop()}}),t)})))()},registerAndLogin:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("register called"),e.otpError.status=!1,t.next=4,e.$post("/registerCustomer",{countryDialCode:e.countryDialCode,countryIsoCode:e.countryIsoCode,phoneNumber:e.formData.mobileNumber.value,otp:e.otp,firstName:e.formData.firstName.value,surName:e.formData.surName.value,platform:"web"});case 4:if(r=t.sent,n=r.response,!1!==r.resolved){t.next=11;break}return e.otpError.msg=n.message,e.otpError.status=!0,t.abrupt("return");case 11:return t.next=13,e.shiftCart();case 13:return e.$store.commit("customer/setAuthorization",!0),t.next=16,e.$store.dispatch("customer/fetchProfile");case 16:return t.next=18,e.$store.dispatch("customerV2/fetchStoreLocation");case 18:if(o={},Object.keys(e.formData).forEach((function(t){o[t]=e.formData[t].value})),o.countryIsoCode=e.countryIsoCode,o.countryDialCode=e.countryDialCode,!e.saveNewAddress){t.next=25;break}return t.next=25,e.saveAddressToProfile(o);case 25:e.$router.push({name:"Checkout",params:{deliveryAddress:o}});case 26:case"end":return t.stop()}}),t)})))()},shiftCart:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/shiftCart",{cart:e.$store.state.customer.cart});case 2:return r=t.sent,n=r.resolved,o=r.response,n&&!0===o.shifted&&e.$store.commit("customer/clearCart"),t.next=8,e.$store.dispatch("customer/fetchCart");case 8:case"end":return t.stop()}}),t)})))()},proceedToCheckout:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateForm()){t.next=2;break}return t.abrupt("return");case 2:if(e.$store.state.customer.authorized){t.next=13;break}t.t0=e.otpSent,t.next=!1===t.t0?6:!0===t.t0?9:12;break;case 6:return t.next=8,e.sendOtp();case 8:return t.abrupt("break",12);case 9:return t.next=11,e.registerAndLogin();case 11:return t.abrupt("break",12);case 12:return t.abrupt("return");case 13:if(r={},Object.keys(e.formData).forEach((function(t){r[t]=e.formData[t].value})),r.countryIsoCode=e.countryIsoCode,r.countryDialCode=e.countryDialCode,!e.saveNewAddress){t.next=20;break}return t.next=20,e.saveAddressToProfile(r);case 20:e.$router.push({name:"Checkout",params:{deliveryAddress:r}});case 21:case"end":return t.stop()}}),t)})))()},saveAddressToProfile:function(address){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/addressBookActions",{action:"save-address",address:address});case 2:t.sent,e.$store.dispatch("customer/fetchProfile");case 4:case"end":return t.stop()}}),t)})))()}}}),c=(r(676),r(9)),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"delivery-page page -wh"},[e.loggedIn&&!e.addressListEmpty?r("div",{staticClass:"saved-addresses flex center col"},[r("br"),e._v(" "),r("h2",{staticClass:"title"},[e._v("Saved Addresses ("+e._s(e.addressList.length)+")")]),e._v(" "),r("p",[e._v("Click to pre-fill address details")]),e._v(" "),r("div",{staticClass:"flex wrap center",staticStyle:{width:"100%"}},e._l(e.addressList,(function(address,t){return r("AddressCard",{key:t,attrs:{address:address,onDeliveryPage:!0,active:e.activeAddressIndex===t},on:{addressSelected:function(r){return e.selectAddress(r,t)}}})})),1),e._v(" "),r("br"),e._v(" "),r("hr",{staticClass:"divider"})]):e._e(),e._v(" "),r("div",{ref:"newAddress",staticClass:"flex container around"},[r("div",{staticClass:"delivery-address flex col center"},[r("h2",{staticClass:"title"},[e._v("Country/Region")]),e._v(" "),r("CountrySelect",{attrs:{lock:e.decideCountryLock},on:{setCountryIsoCode:function(t){e.countryIsoCode=t}},model:{value:e.countryDialCode,callback:function(t){e.countryDialCode=t},expression:"countryDialCode"}}),e._v(" "),r("h2",{staticClass:"title"},[e._v("Shipping Address")]),e._v(" "),e._l(e.formData,(function(t,n,o){return r("DeliveryInput",{key:o,attrs:{type:t.type,error:t.error,label:t.label,isMobileNumber:"mobileNumber"===n,maxLength:"addressLine1"===n||"addressLine2"===n?60:100,countryCode:e.countryDialCode,disabled:e.otpSent},on:{input:function(e){t.error.status=!1}},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"field.value"}})})),e._v(" "),e.otpSent?r("hr",{staticStyle:{"border-bottom":"1px solid #efefef",width:"85%"}}):e._e(),e._v(" "),e.otpSent?r("InputCredential",{attrs:{label:"One Time Password"},model:{value:e.otp,callback:function(t){e.otp=t},expression:"otp"}}):e._e(),e._v(" "),e.otpSent&&e.otpError.status?r("p",{staticClass:"msg error"},[e._v("\n        "+e._s(e.otpError.msg)+"\n      ")]):e._e()],2),e._v(" "),r("div",{staticClass:"order-total-container"},[r("OrderTotal")],1)]),e._v(" "),r("div",{staticClass:"proceed flex center col"},[-1===e.activeAddressIndex?r("Checkbox",{attrs:{label:"Save address for later use."},model:{value:e.saveNewAddress,callback:function(t){e.saveNewAddress=t},expression:"saveNewAddress"}}):e._e(),e._v(" "),r("br"),e._v(" "),r("button",{staticClass:"action",on:{click:e.proceedToCheckout}},[e._v("\n      "+e._s(1==e.otpSent||e.$store.state.customer.authorized?"Continue to Checkout":"Verify Phone Number and Continue")+"\n    ")])],1)])}),[],!1,null,"26d623d6",null);t.default=component.exports;installComponents(component,{AddressCard:r(587).default,CountrySelect:r(549).default,DeliveryInput:r(588).default,InputCredential:r(524).default,OrderTotal:r(561).default,Checkbox:r(582).default})}}]);