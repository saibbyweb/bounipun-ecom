(window.webpackJsonp=window.webpackJsonp||[]).push([[22,38,51,64,66,81],{496:function(e,t,n){"use strict";var l=n(15),o=n(2),r=n(5),c=n(92),d=n(25),m=n(20),f=n(167),v=n(55),h=n(129),_=n(261),x=n(7),k=n(74).f,I=n(48).f,S=n(21).f,C=n(263),T=n(262).trim,y="Number",P=o.Number,$=P.prototype,w=o.TypeError,U=r("".slice),A=r("".charCodeAt),F=function(e){var t=_(e,"number");return"bigint"==typeof t?t:E(t)},E=function(e){var t,n,l,o,r,c,d,code,m=_(e,"number");if(h(m))throw w("Cannot convert a Symbol value to a number");if("string"==typeof m&&m.length>2)if(m=T(m),43===(t=A(m,0))||45===t){if(88===(n=A(m,2))||120===n)return NaN}else if(48===t){switch(A(m,1)){case 66:case 98:l=2,o=49;break;case 79:case 111:l=8,o=55;break;default:return+m}for(c=(r=U(m,2)).length,d=0;d<c;d++)if((code=A(r,d))<48||code>o)return NaN;return parseInt(r,l)}return+m};if(c(y,!P(" 0o1")||!P("0b1")||P("+0x1"))){for(var L,N=function(e){var t=arguments.length<1?0:P(F(e)),n=this;return v($,n)&&x((function(){C(n)}))?f(Object(t),n,N):t},O=l?k(P):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),B=0;O.length>B;B++)m(P,L=O[B])&&!m(N,L)&&S(N,L,I(P,L));N.prototype=$,$.constructor=N,d(o,y,N)}},497:function(e,t,n){},498:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},503:function(e,t,n){"use strict";n(497)},504:function(e,t,n){"use strict";n.r(t);n(496),n(75),n(93);var l={props:{label:String,value:String|Number,placeholder:{type:String,default:""},type:{type:String,default:"text"},internal:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},uppercase:{type:Boolean,default:!1},options:{type:Object}},methods:{isBounipunUrl:function(s){return null!=s&&""!==s&&s.includes("bounipun.in")}}},o=(n(503),n(9)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-box"},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[e.internal?n("div",{staticClass:"internal"}):e._e(),e._v(" "),n("label",{staticClass:"label",attrs:{title:e.options&&e.options.title?e.options.title:""}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("input",{staticClass:"input-box",class:{uppercase:e.uppercase},attrs:{type:e.type,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),e.options&&e.options.indicator?n("span",{staticClass:"indicator",class:e.isBounipunUrl(e.value)?"bounipunUrl":"externalLink"},[e._v("\n    "+e._s(e.isBounipunUrl(e.value)?"âœ… Bounipun URL":"External Link")+"\n  ")]):e._e()])}),[],!1,null,"285d608e",null);t.default=component.exports},505:function(e,t,n){"use strict";n(498)},507:function(e,t,n){"use strict";n(500)},508:function(e,t,n){"use strict";n(501)},509:function(e,t,n){"use strict";n.r(t);var l={props:{label:String,value:Boolean,activeText:{type:String,default:"Active"},inactiveText:{type:String,default:"Inactive"},disabled:{type:Boolean,default:!1},width:{type:String,default:"120px"},labelCSS:{type:String,default:""}},data:function(){return{toggleOn:!1}},methods:{toggleState:function(){this.toggleOn=!this.value,this.$emit("input",this.toggleOn)}}},o=(n(508),n(9)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-box"},[n("label",{staticClass:"label",style:e.labelCSS},[e._v(" "+e._s(e.label)+" :")]),e._v(" "),e.disabled?e._e():n("div",{staticClass:"switch-box center",class:{on:e.value},style:{width:e.width,pointerEvents:e.disabled?"none":""},on:{click:e.toggleState}},[n("div",{staticClass:"toggle center",class:{on:e.value}},[n("div",{staticClass:"circle"})]),e._v(" "),n("span",{class:{on:e.value}},[e._v("\n      "+e._s(e.value?e.activeText:e.inactiveText)+"\n    ")])]),e._v(" "),e.disabled?n("span",{class:{on:e.value}},[e._v("\n    "+e._s(e.value?e.activeText:e.inactiveText)+"\n  ")]):e._e()])}),[],!1,null,"084fb2d6",null);t.default=component.exports},510:function(e,t,n){"use strict";n.r(t);var l={props:{label:String,value:String,internal:{type:Boolean,default:!1},nonAdmin:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},o=(n(505),n(9)),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-box",class:{nonAdmin:e.nonAdmin}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[e.internal?n("div",{staticClass:"internal"}):e._e(),e._v(" "),n("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),n("textarea",{staticClass:"textarea-box",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,"65b6a339",null);t.default=component.exports},512:function(e,t,n){"use strict";n.r(t);n(507);var l=n(9),component=Object(l.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cancel-update center"},[n("img",{attrs:{src:"/icons/dark/minus.png"},on:{click:function(t){return e.$emit("close")}}})])}),[],!1,null,"756c3226",null);t.default=component.exports},520:function(e,t,n){},532:function(e,t,n){"use strict";n(520)},535:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(22),n(13),n(33),n(35),n(36),n(547),n(266),n(28),n(41),n(169),{props:{label:{type:String,default:"Add Files"},multipleUpload:{type:Boolean,default:!0},uploadType:{type:String,default:"non-product"},uploaded:Array},data:function(){return{cancelToken:this.$axios.CancelToken,images:[],uploadImageAPI:"/uploadImage"}},methods:{clearFileSelection:function(){this.images=[]},assignImages:function(e){var t=this;if(console.log("ASSIGN IMAGES WAS CALLED"),!(!e.length>0)){this.images=[];e.forEach((function(image){var e={file:null,previewURL:"https://bounipun-ecom.s3.ap-south-1.amazonaws.com/original/"+image.path,cancelToken:null,uploadPercentage:100,uploaded:!0,mainImage:image.mainImage,_id:image._id,path:image.path};t.images.push(e)}))}},addFiles:function(){this.$refs.selector.click()},handleFileSelection:function(){var e=this,t=this.$refs.selector.files;this.multipleUpload||(this.images=[]),t.forEach((function(t){var n=e.createImageObject(t);e.images.push(n),e.uploadFile(n),e.resetFileSelection()}))},createImageObject:function(e){return{file:e,previewURL:URL.createObjectURL(e),cancelToken:this.cancelToken.source(),uploadPercentage:0,uploaded:!1,mainImage:!1,_id:"",path:""}},uploadFile:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var l,o,r,c,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(l=new FormData).append("productImage",e.file),l.append("uploadType",t.uploadType),o=t.setUploadConfig(e),r=t.$axios.$post(t.uploadImageAPI,l,o),n.next=7,t.$task(r);case 7:if(c=n.sent,d=c.response,!(m=c.error)){n.next=13;break}return t.$axios.isCancel(m)&&console.log("Upload request cancelled"),n.abrupt("return");case 13:t.updateImageObject(e,d);case 14:case"end":return n.stop()}}),n)})))()},setUploadConfig:function(e){return{cancelToken:e.cancelToken.token,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(progress){e.uploadPercentage=parseInt(Math.round(progress.loaded/progress.total*100))}}},updateImageObject:function(e,t){e.uploaded=100===e.uploadPercentage,e.path=t.name,e._id=t._id,this.$emit("updated",this.images)},setMainImage:function(e,t){var n=this;if(t)for(var i=0;i<this.images.length;i++)i!==e&&(this.images[i].mainImage=!1);setTimeout((function(){n.images[e].mainImage=!0,n.$emit("updated",n.images)}),100)},removeFile:function(e){this.images[e].uploaded||this.images[e].cancelToken.cancel(),this.images.splice(e,1),this.$emit("updated",this.images)},resetFileSelection:function(){this.$refs.selector.type="text",this.$refs.selector.type="file"}}}),r=(n(532),n(9)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-container"},[n("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),n("input",{ref:"selector",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:e.multipleUpload},on:{change:function(t){return e.handleFileSelection()}}}),e._v(" "),n("button",{staticClass:"file-selector",on:{click:function(t){return e.addFiles()}}},[e._v("\n    Select File(s)\n  ")]),e._v(" "),n("div",{staticClass:"previews"},[e._l(e.images,(function(image,t){return n("div",{key:t,staticClass:"preview center",class:{uploading:!image.uploaded},style:{backgroundImage:"url("+image.previewURL+")"}},[n("div",{staticClass:"actions center-col"},[n("img",{staticClass:"remove-file",attrs:{src:"/icons/light/remove-icon.png"},on:{click:function(n){return e.removeFile(t)}}}),e._v(" "),e.multipleUpload?n("input",{directives:[{name:"model",rawName:"v-model",value:image.mainImage,expression:"image.mainImage"}],staticClass:"set-main-image",attrs:{type:"checkbox"},domProps:{checked:image.mainImage,checked:Array.isArray(image.mainImage)?e._i(image.mainImage,null)>-1:image.mainImage},on:{change:[function(t){var n=image.mainImage,l=t.target,o=!!l.checked;if(Array.isArray(n)){var r=e._i(n,null);l.checked?r<0&&e.$set(image,"mainImage",n.concat([null])):r>-1&&e.$set(image,"mainImage",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(image,"mainImage",o)},function(n){return e.setMainImage(t,n.target.checked)}]}}):e._e()]),e._v(" "),image.uploaded?e._e():n("div",{staticClass:"progress center"},[n("vue-ellipse-progress",{attrs:{color:"#41bf89",size:70,thickness:7,legend:!0,fontSize:"1rem",progress:image.uploadPercentage}},[n("img",{staticClass:"upload-icon",attrs:{slot:"legend-caption",wdith:"60px",src:"/icons/light/upload-cloud.svg"},slot:"legend-caption"})])],1),e._v(" "),image.mainImage?n("span",{staticClass:"main-image"},[e._v(" Main Image ")]):e._e(),e._v(" "),n("span",{staticClass:"numbering"},[e._v(" "+e._s(t+1)+" ")])])})),e._v(" "),0===e.images.length?n("div",{staticClass:"not-uploaded",staticStyle:{"margin-left":"10px"}},[n("img",{attrs:{src:"/icons/light/upload-cloud.svg"}}),e._v(" "),n("span",[e._v(" No Image(s) uploaded yet ")])]):e._e()],2)])}),[],!1,null,"5d760990",null);t.default=component.exports},637:function(e,t,n){},704:function(e,t,n){"use strict";n(637)},738:function(e,t,n){"use strict";n.r(t);var l=n(3),o=(n(22),n(24),n(13),n(76),n(47),n(169),n(28),n(64),n(41),n(32),n(56),{props:{model:String},data:function(){return{editMode:!1,doc:{_id:"",name:"",slug:"",list:[],image:"",text:"",lockedImage:"",lockedText:"",lock:!1,description:"",status:!1},allProducts:[],loading:!1,updated:!1,errorToast:{status:!1,msg:""},allSelected:!1}},computed:{allProductsExceptSelected:function(){var e=this;return 0===this.allProducts.length?[]:this.allProducts.filter((function(t){return-1===e.doc.list.findIndex((function(e){return e===t._id}))}))}},mounted:function(){this.fetchAllProducts()},methods:{toggleSelectAll:function(){this.allSelected=!this.allSelected,this.doc.list=[],this.allSelected&&(this.doc.list=this.allProducts.map((function(e){return e._id})))},imageListUpdated:function(e,t){switch(t){case"image":this.doc.image=e.length>0?e[0].path:"";break;case"lockedImage":this.doc.lockedImage=e.length>0?e[0].path:""}},removeProduct:function(e){this.doc.list.splice(e,1)},addProduct:function(data){console.log("Update product list",data),this.doc.list.push(data.selectedObject._id)},getProductName:function(e){var t=this.allProducts.findIndex((function(t){return t._id===e}));return-1!==t?this.allProducts[t].name:"Not found"},fetchAllProducts:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetchCollection("products");case 2:n=t.sent,e.allProducts=n.docs.map((function(e){var t=e._id,n=e.styleId,l=e.name;return{_id:t,name:"".concat(n," - (").concat(l,")")}}));case 4:case"end":return t.stop()}}),t)})))()},updateDocument:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$updateDocument(e.model,e.doc,e.editMode);case 3:if(n=t.sent,e.loading=!1,n.updated){t.next=10;break}return e.errorToast.status=!0,e.errorToast.msg=void 0!==n.msg?n.msg:"Something went wrong",setTimeout((function(){return e.errorToast.status=!1}),2200),t.abrupt("return");case 10:e.$emit("updated"),e.populateForm(n.doc),e.editMode=!0,e.$flash(e);case 14:case"end":return t.stop()}}),t)})))()},deleteDocument:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$deleteDocument(e.model,e.doc._id);case 3:if(n=t.sent,e.loading=!1,n.deleted){t.next=11;break}return console.log(n),e.errorToast.status=!0,e.errorToast.msg=void 0!==n.msg?n.msg:"Something went wrong",setTimeout((function(){return e.errorToast.status=!1}),2200),t.abrupt("return");case 11:e.$emit("updated"),e.resetForm(),e.$flash(e);case 14:case"end":return t.stop()}}),t)})))()},populateForm:function(details){var e=details._id,t=details.name,n=details.list,l=details.slug,image=details.image,text=details.text,o=details.lockedImage,r=details.lockedText,c=details.lock,d=details.description,m=details.status;this.doc={_id:e,name:t,list:n,slug:void 0===l?"":l,image:image,text:text,lockedImage:o,lockedText:r,lock:c,description:d,status:m},this.editMode=!0},closeForm:function(){this.resetForm(),this.$emit("close")},resetForm:function(){this.$refs.imageUploader.clearFileSelection(),this.$refs.lockedImageUploader.clearFileSelection(),this.populateForm({_id:"",name:"",slug:"",list:[],image:"",text:"",lockedImage:"",lockedText:"",lock:!1,description:"",status:!1}),this.allSelected=!1,this.editMode=!1}}}),r=(n(704),n(9)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contents"},[n("CancelUpdate",{on:{close:e.closeForm}}),e._v(" "),n("h2",{staticClass:"heading"},[e._v(e._s(e.editMode?"Update":"Add New")+" Product List")]),e._v(" "),n("div",{staticClass:"center"},[e.editMode?n("a",{attrs:{href:"/lists/"+e.doc.slug,target:"_blank"}},[n("span",{staticStyle:{background:"#333","text-align":"center",color:"white","font-size":"12px",padding:"2px 4px","border-radius":"2px"}},[e._v("\n        Preview Product List âžš\n      ")])]):e._e()]),e._v(" "),e.editMode?n("InputBox",{attrs:{label:"Product List ID",disbaled:"",internal:!0},model:{value:e.doc._id,callback:function(t){e.$set(e.doc,"_id",t)},expression:"doc._id"}}):e._e(),e._v(" "),n("InputBox",{attrs:{label:"Product List Name"},model:{value:e.doc.name,callback:function(t){e.$set(e.doc,"name",t)},expression:"doc.name"}}),e._v(" "),n("TextBox",{attrs:{label:"Text (Paragraph):"},model:{value:e.doc.text,callback:function(t){e.$set(e.doc,"text",t)},expression:"doc.text"}}),e._v(" "),n("InputBox",{attrs:{label:"List Slug"},model:{value:e.doc.slug,callback:function(t){e.$set(e.doc,"slug",t)},expression:"doc.slug"}}),e._v(" "),n("UploadImage",{ref:"imageUploader",attrs:{multipleUpload:!1,label:"Set Product List Header Image"},on:{updated:function(t){return e.imageListUpdated(t,"image")}}}),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"section"},[n("client-only",[n("label",{staticClass:"label"},[e._v(" List of Products: ("+e._s(e.doc.list.length)+")")]),e._v(" "),n("button",{staticClass:"action small",on:{click:e.toggleSelectAll}},[e._v("\n        Select All\n      ")]),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("autocomplete",{ref:"autocomplete",attrs:{inputClass:"small",source:e.allProductsExceptSelected},on:{enter:e.addProduct,selected:e.addProduct}})],1),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"list"},e._l(e.doc.list,(function(t,l){return n("div",{key:t._id,staticClass:"selected"},[n("span",[e._v(" "+e._s(e.getProductName(t))+" ")]),e._v(" "),n("img",{attrs:{src:"/icons/light/trash.png"},on:{click:function(t){return e.removeProduct(l)}}})])})),0)],1),e._v(" "),n("TextBox",{attrs:{label:"Description",internal:!0},model:{value:e.doc.description,callback:function(t){e.$set(e.doc,"description",t)},expression:"doc.description"}}),e._v(" "),n("div",{staticClass:"section"},[n("label",{staticClass:"label"},[e._v(" Product List Lock ")]),e._v(" "),n("UploadImage",{ref:"lockedImageUploader",attrs:{multipleUpload:!1,label:"Set Locked Header Image"},on:{updated:function(t){return e.imageListUpdated(t,"lockedImage")}}}),e._v(" "),n("TextBox",{attrs:{label:"Locked Text (Paragraph):"},model:{value:e.doc.lockedText,callback:function(t){e.$set(e.doc,"lockedText",t)},expression:"doc.lockedText"}}),e._v(" "),n("Toggle",{attrs:{label:"ðŸ”’ Lock",width:"90px",activeText:"Enabled",inactiveText:"Unlocked"},model:{value:e.doc.lock,callback:function(t){e.$set(e.doc,"lock",t)},expression:"doc.lock"}})],1),e._v(" "),n("Toggle",{attrs:{label:"Page Visibility"},model:{value:e.doc.status,callback:function(t){e.$set(e.doc,"status",t)},expression:"doc.status"}}),e._v(" "),n("div",{staticClass:"center-space"},[e.loading?n("img",{staticClass:"loading",attrs:{src:"/loading.gif"}}):e._e(),e._v(" "),e.updated?n("img",{staticClass:"action-complete",attrs:{src:"/complete.gif"}}):e._e(),e._v(" "),n("button",{staticClass:"action",attrs:{disabled:e.loading},on:{click:e.updateDocument}},[e._v("\n      "+e._s(e.editMode?"Edit":"Add")+" Product List\n    ")]),e._v(" "),e.editMode?n("button",{staticClass:"action delete",attrs:{disabled:e.loading},on:{click:e.deleteDocument}},[e._v("\n      Delete\n    ")]):e._e(),e._v(" "),e.errorToast.status?n("Toast",{attrs:{msg:e.errorToast.msg,show:e.errorToast.status,error:!0}}):e._e()],1)],1)}),[],!1,null,"039094ad",null);t.default=component.exports;installComponents(component,{CancelUpdate:n(512).default,InputBox:n(504).default,TextBox:n(510).default,UploadImage:n(535).default,Toggle:n(509).default,Toast:n(530).default})}}]);