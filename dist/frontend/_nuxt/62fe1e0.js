(window.webpackJsonp=window.webpackJsonp||[]).push([[84,52,63,67],{515:function(t,e,o){},522:function(t,e,o){"use strict";o(515)},524:function(t,e,o){"use strict";o.r(e);var r={props:{label:String,value:String,type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},clearError:{type:Boolean,default:!0},uppercase:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},isMobileNumber:{type:Boolean,default:!1},isUnlocker:{type:Boolean,default:!1},placeholder:{type:String,default:""},textarea:{type:Boolean,default:!1},countryDialCode:String,error:{status:Boolean,msg:String}},data:function(){return{}},methods:{emitInput:function(t){this.$emit("input",t.target.value),this.clearError&&void 0!==this.$parent.error&&(this.$parent.error.status=!1)}}},n=(o(522),o(9)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"input-credential"},[o("label",{staticClass:"label"},[t._v(" "+t._s(t.label)+" ")]),t._v(" "),o("div",{staticClass:"input-box"},[t.isMobileNumber?o("div",{staticClass:"country-code"},[t._v("\n      "+t._s(t.countryDialCode)+"\n    ")]):t._e(),t._v(" "),t.checked?o("div",{staticClass:"checked flex center"},[o("img",{attrs:{src:"/icons/simple_green_check.png"}})]):t._e(),t._v(" "),o("input",{staticClass:"field",class:{isMobileNumber:t.isMobileNumber,uppercase:t.uppercase,textarea:t.textarea,isUnlocker:t.isUnlocker},attrs:{type:t.type,disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.value},on:{input:t.emitInput}})])])}),[],!1,null,"933e9e40",null);e.default=component.exports},553:function(t,e,o){},554:function(t,e,o){},555:function(t,e,o){},567:function(t,e,o){"use strict";o(553)},568:function(t,e,o){"use strict";o(554)},569:function(t,e,o){"use strict";o(555)},584:function(t,e,o){"use strict";o.r(e);o(496);var r={data:function(){return{gridView:!0}},props:{searchTerm:{type:String,default:""},totalMatches:{type:Number,defauly:0},collectionView:{type:Boolean,default:!1}},computed:{currentViewImage:function(){return this.gridView?"/icons/dark/grid.png":"/icons/dark/single-box.png"}},methods:{openFilters:function(){this.$emit("openFilters")},openSort:function(){this.$emit("openSort")},toggleGridView:function(){this.gridView=!this.gridView,this.$emit("viewChanged",this.gridView)}}},n=(o(567),o(9)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"fs-wrapper flex center col"},[t.collectionView?t._e():o("p",[t._v("\n    Showing "+t._s(t.totalMatches)+" results for\n    "),o("i",[t._v(' "'+t._s(t.searchTerm)+'" ')])]),t._v(" "),o("div",{staticClass:"relative-wrapper flex center"},[o("div",{staticClass:"filters-and-sort"},[o("button",{staticClass:"action",on:{click:t.openFilters}},[t._v("\n        Filters\n        "),o("img",{staticClass:"arrow-bottom",attrs:{src:"/icons/arrow_bottom.png"}})]),t._v(" "),o("span",{staticClass:"pipe"},[t._v(" | ")]),t._v(" "),o("button",{staticClass:"action",on:{click:t.openSort}},[t._v("\n        Sort\n        "),o("img",{staticClass:"arrow-bottom",attrs:{src:"/icons/arrow_bottom.png"}})]),t._v(" "),o("div",{staticClass:"mobile-view-switcher flex center"},[o("img",{attrs:{src:t.currentViewImage},on:{click:t.toggleGridView}})])])])])}),[],!1,null,"0783cf48",null);e.default=component.exports},585:function(t,e,o){"use strict";o.r(e);var r={props:{sortOpen:{type:Boolean,default:!1}},data:function(){return{sortData:{priceRange:""}}},watch:{sortData:{handler:function(t){this.$emit("updated",t)},deep:!0,immediate:!0},$route:function(){this.clearSort()}},methods:{clearSort:function(){this.sortData.priceRange=""}}},n=(o(568),o(9)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"offcanvas-sort shadow",class:{visible:t.sortOpen}},[o("div",{staticStyle:{position:"relative"}},[o("br"),t._v(" "),o("br"),t._v(" "),o("div",{staticClass:"header shadow"},[o("h3",[t._v("Sort")]),t._v(" "),o("span",{staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:t.clearSort}},[t._v("\n        Clear Sort\n      ")]),t._v(" "),o("img",{staticClass:"close",attrs:{src:"/icons/dark/close.png"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),o("br"),t._v(" "),o("div",{staticClass:"all-options",staticStyle:{"margin-top":"4vh"}},[o("div",[o("label",{staticClass:"label"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.sortData.priceRange,expression:"sortData.priceRange"}],attrs:{type:"radio",name:"priceSort",value:"-1"},domProps:{checked:t._q(t.sortData.priceRange,"-1")},on:{change:function(e){return t.$set(t.sortData,"priceRange","-1")}}}),t._v("\n          Price (High - Low)\n        ")])]),t._v(" "),o("div",[o("label",{staticClass:"label"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.sortData.priceRange,expression:"sortData.priceRange"}],attrs:{type:"radio",name:"priceSort",value:"1"},domProps:{checked:t._q(t.sortData.priceRange,"1")},on:{change:function(e){return t.$set(t.sortData,"priceRange","1")}}}),t._v("\n          Price (Low - High)\n        ")])])])])])}),[],!1,null,"249b2d50",null);e.default=component.exports},586:function(t,e,o){"use strict";o.r(e);var r=o(3),n=(o(22),o(264),{data:function(){return{unlockCode:"",unlockCodeError:{status:!1,message:""},unlockCodeApplied:!1}},mounted:function(){this.$route.query.code&&(this.unlockCode=this.$route.query.code)},methods:{applyUnlockCode:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.unlockCodeError.status=!1,!(""===t.unlockCode.trim()||t.unlockCode.length>25)){e.next=4;break}return t.unlockCodeError={status:!0,message:"Please enter a valid unlock code"},e.abrupt("return");case 4:return e.next=6,t.$post("/applyUnlockCode",{unlockCode:t.unlockCode});case 6:if(!1!==(o=e.sent).resolved){e.next=10;break}return t.unlockCodeError={status:!0,message:"Couldn't apply unlock code"},e.abrupt("return");case 10:console.log(o),location.reload();case 12:case"end":return e.stop()}}),e)})))()}}}),c=(o(569),o(9)),component=Object(c.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"unlock-content"},[o("div",{staticClass:"form flex col center"},[o("InputCredential",{attrs:{label:"",uppercase:!0,checked:t.unlockCodeApplied,disabled:t.unlockCodeApplied,isUnlocker:!0,placeholder:"Enter Premium Access Code"},on:{input:function(e){t.unlockCodeError.status=!1}},model:{value:t.unlockCode,callback:function(e){t.unlockCode=e},expression:"unlockCode"}}),t._v(" "),o("button",{staticClass:"action apply",class:{applied:t.unlockCodeApplied},on:{click:t.applyUnlockCode}},[t._v("\n      "+t._s(t.unlockCodeApplied?"Unlocking...":"Activate Bounipun Premium")+"\n    ")]),t._v(" "),t.unlockCodeError.status?o("p",{staticClass:"error msg"},[t._v("\n      "+t._s(t.unlockCodeError.message)+"\n    ")]):t._e()],1)])}),[],!1,null,"4092837e",null);e.default=component.exports;installComponents(component,{InputCredential:o(524).default})},604:function(t,e,o){},671:function(t,e,o){"use strict";o(604)},751:function(t,e,o){"use strict";o.r(e);o(53),o(54);var r=o(95),n=o(3),c=o(23);o(22),o(28),o(40),o(47),o(13),o(33),o(265),o(64),o(24),o(76),o(540),o(32),o(56);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={head:function(){var t;return{title:"".concat(null===(t=this.collection)||void 0===t?void 0:t.name," | Bounipun Kashmir")}},data:function(){return{gridView:!0,rawCriterion:{search:{key:"name",term:""},filters:{},sortBy:{},limit:50,cursor:1},products:[],collection:{name:"fetching..."},filterData:[],sortData:{},filtersOpen:!1,sortOpen:!1,filterDataFetched:!1,colorCategories:[],escapeProduct:[],loading:!1,initialLoadComplete:!1}},watch:{$route:function(t,e){this.products=[],this.escapeProduct=[],this.colorCategories=[],this.collection={name:"fetching... "},this.fetchResults(t.query.slug)}},computed:{collectionImageProvided:function(){return""!==this.collectionImage},collectionImage:function(){return this.collectionLocked?this.collection.lockedImage:this.collection.image},collectionText:function(){var t=this.collection;return this.collectionLocked?t.lockedText:mainTextBlock},collectionLocked:function(){if(!0===this.collection.lock){var t=this.$store.state.customer;switch(t.authorized){case!0:return!(!0===t.user.contentUnlock.status);case!1:return!0}}return!1},collectionSoftLocked:function(){return void 0!==this.collection.softLock&&this.collection.softLock},collectionSoftLockAccess:function(){return!this.collectionSoftLocked||this.$store.state.customer.authorized},collectionLockedAndUserAuthorized:function(){var t=this.$store.state.customer;return this.collectionLocked&&!0===t.authorized},isEscape:function(){return"ESCAPE"===this.$route.query.slug.toUpperCase()},noFiltersApplied:function(){return 0===Object.keys(this.rawCriterion.filters).length||0===this.rawCriterion.colors.length&&0===this.rawCriterion.filters.availabilityType.length&&0===this.rawCriterion.filters["variants._id"].length},noFilterOrSortApplied:function(){return this.noFiltersApplied&&void 0===this.rawCriterion.sortBy["priceRange.startsAt"]}},mounted:function(){},methods:{fetchSlideshow:function(t){var e=this;return t.map((function(t){return e.$getOriginalPath(t.path)}))},filtersUpdated:function(t){this.filterData=t,this.fetchResults()},sortUpdated:function(t){this.sortData=t,this.fetchResults()},getCheckedOnes:function(t){var e=[],o=d({},t);return Object.keys(o).forEach((function(t){!0===o[t].checked&&e.push(o[t].value)})),e},fetchResults:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,r,n,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.escapeProduct=[],t.products=[],!1!==t.filterDataFetched){e.next=4;break}return e.abrupt("return");case 4:return t.rawCriterion.cursor=1,(o={}).availabilityType=t.getCheckedOnes(t.filterData.availabilityTypes),r=t.filterData.collections.find((function(col){return col.slug.toUpperCase()==t.$route.query.slug.toUpperCase()})),t.collection=r,o.bounipun_collection=[r._id],o["variants._id"]=t.getCheckedOnes(t.filterData.variants),t.rawCriterion.colors=t.getCheckedOnes(t.filterData.baseColors),t.rawCriterion.filters=o,t.rawCriterion.selectedPriceRange=t.filterData.selectedPriceRange,void 0!==t.sortData.priceRange&&""!==t.sortData.priceRange?t.rawCriterion.sortBy={"priceRange.startsAt":parseInt(t.sortData.priceRange)}:t.rawCriterion.sortBy={},t.isEscape&&t.noFiltersApplied&&void 0!==t.rawCriterion.sortBy["priceRange.startsAt"]&&(t.rawCriterion.sortBy={}),t.$store.commit("customer/setLoading",!0),n=t.$axios.$post("/searchProducts",{rawCriterion:t.rawCriterion,lockCheck:t.collection.lock}),e.next=20,t.$task(n);case 20:if(c=e.sent,l=c.response,d=c.error,t.$store.commit("customer/setLoading",!1),!d){e.next=27;break}return console.log("Could not fetch documents"),e.abrupt("return");case 27:try{window.scroll({top:0,behavior:"smooth"})}catch(t){}if(t.initialLoadComplete=!0,0!==l.docs.length){e.next=33;break}return console.log("No matches found"),t.products=[],e.abrupt("return");case 33:if(l.docs.forEach((function(e){if(e.bounipun_collection=t.collection.name,"ready-to-ship"===e.availabilityType&&"third-party"!==e.type&&void 0!==e.rtsDirectVariant){var o=t.filterData.variants.find((function(t){return t.value===e.rtsDirectVariant}));void 0!==o&&(e.rtsDirectVariant=o.name)}})),!t.isEscape||!t.noFilterOrSortApplied){e.next=38;break}return t.products=l.docs,t.sortEscape(l.docs),e.abrupt("return");case 38:t.processColorSegregation(l.docs);case 39:case"end":return e.stop()}}),e)})))()},processColorSegregation:function(t){var e=this,o=[];t.forEach((function(t){var n=e.findMatchedColors(t);o=[].concat(Object(r.a)(o),Object(r.a)(n))})),console.log(o,o.length,"-- WATCH"),this.products=o},findMatchedColors:function(t){var e=this;console.log(t,"matched");var o=[];return t.colors=t.colors.filter((function(t){return!0===t.status})),t.colors.forEach((function(r,n){var c=e.rawCriterion.colors.findIndex((function(col){return col===r.baseColor})),l=e.rawCriterion.colors.findIndex((function(col){return col===r.additionalColor1})),f=e.rawCriterion.colors.findIndex((function(col){return col===r.additionalColor2}));if((-1!==c||-1!==l||-1!==f)&&!0===r.status){var h=d({},t);console.log("COLOR MATCHED",r.name,t.bounipun_collection),"ESCAPE"===t.bounipun_collection.toUpperCase()&&(console.log("ESCAPE COLOR FOUND"),h.name=r.name),o.push({color:h,actualIndex:n})}})),0===o.length&&(o=[{color:t,actualIndex:-1}]),o},adjustProduct:function(t,e){console.log(t,"-- adjust product");var o=d({},t);return o.name=o.colors[e].name,d({},o)},fetchColorCategories:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchData("color_categories",{},!0);case 2:if((o=e.sent).fetched){e.next=6;break}return console.log("could not fetch color categories"),e.abrupt("return");case 6:t.colorCategories=o.docs;case 7:case"end":return e.stop()}}),e)})))()},fetchCollectionProducts:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.$fetchData("collections",{slug:t,status:!0});case 2:if((r=o.sent).fetched){o.next=5;break}return o.abrupt("return");case 5:if(e.collection=r.doc,"Escape"!==e.collection.name){o.next=9;break}return o.next=9,e.fetchColorCategories();case 9:return o.next=11,e.$fetchData("products",{bounipun_collection:r.doc._id,type:"under-bounipun",status:!0},!0);case 11:if((n=o.sent).fetched){o.next=14;break}return o.abrupt("return");case 14:n.docs.forEach((function(t){t.colors=t.colors.filter((function(t){return!0===t.status})),t.variants.sort((function(a,b){return a._id.order-b._id.order}))})),n.docs=n.docs.filter((function(t){return t.colors.length>0})),n.docs.forEach((function(t){"ready-to-ship"===t.availabilityType&&"third-party"!==t.type&&void 0!==t.rtsDirectVariant&&(t.rtsDirectVariant=t.rtsDirectVariant.name)})),e.products=n.docs,"Escape"===e.collection.name&&e.sortEscape(e.products);case 19:case"end":return o.stop()}}),o)})))()},sortEscape:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var r,n,i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,e.fetchColorCategories();case 2:for(r=t[0],n=[],i=0;i<r.colors.length;i++)r.colors[i]._id=r.colorData[i];e.colorCategories.forEach((function(t){r.colors=r.colors.filter((function(t){return!0===t.status}));var e=r.colors.filter((function(e){return e.actualIndex=r.colors.findIndex((function(col){return col._id===e._id})),e._id.category===t._id}));n.push({name:t.name,description:t.description,colors:e})})),console.log("sort escape called",r,n),e.escapeProduct=n;case 8:case"end":return o.stop()}}),o)})))()},getCollectionImage:function(image){return void 0===image?"":this.$getOriginalPath(image)}}},h=(o(671),o(9)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex col page -wh"},[t.collectionImageProvided&&!t.collectionLocked?o("div",{staticClass:"c-header center",class:{isEscape:t.isEscape,collectionLocked:t.collectionLocked},style:{backgroundImage:"url("+t.getCollectionImage(t.collectionImage)+")"}},[""===t.collection.image?o("h2",{staticClass:"heading"},[t._v("\n      "+t._s(t.collection.name)+"\n    ")]):t._e()]):t._e(),t._v(" "),t.collectionLocked?o("div",{staticClass:"locked-image-slideshow center"},[o("slideshow",{attrs:{size:"cover",images:t.fetchSlideshow(t.collection.lockedImages),mSlideHeight:"120vw",dSlideHeight:"90vh",dSlideWidth:100,autoplay:!0,main:!0}})],1):t._e(),t._v(" "),void 0!==t.collection.mainTextBlock&&t.collection.mainTextBlock.visible?o("div",{staticClass:"main-text-block center-col pad"},[o("h2",{staticClass:"text-1"},[t._v(t._s(t.collection.mainTextBlock.text1))]),t._v(" "),o("p",{staticClass:"text-2"},[t._v(t._s(t.collection.mainTextBlock.text2))]),t._v(" "),t.collectionLocked?o("p",{staticClass:"text-2"},[t._v(t._s(t.collection.lockedText))]):o("p",{staticClass:"text-3"},[t._v("\n      "+t._s(t.collection.mainTextBlock.text3)+"\n    ")])]):t._e(),t._v(" "),t.collectionLocked?t._e():o("FilterSortToggles",{attrs:{collectionView:!0},on:{openFilters:function(e){t.filtersOpen=!0,t.sortOpen=!1},openSort:function(e){t.sortOpen=!0,t.filtersOpen=!1},viewChanged:function(e){t.gridView=e}}}),t._v(" "),o("FilterProducts",{ref:"filters",attrs:{filtersOpen:t.filtersOpen,collectionView:!0,isEscape:t.isEscape},on:{close:function(e){t.filtersOpen=!1},updated:t.filtersUpdated,dataFetched:function(e){t.filterDataFetched=!0}}}),t._v(" "),o("SortProducts",{attrs:{sortOpen:t.sortOpen},on:{close:function(e){t.sortOpen=!1},updated:t.sortUpdated}}),t._v(" "),!t.collectionLocked&&t.isEscape&&!t.noFilterOrSortApplied&&t.collectionSoftLockAccess||!t.collectionLocked&&!t.isEscape&&t.collectionSoftLockAccess?o("div",{staticClass:"collection-items"},[t._l(t.products,(function(e,r){return o("product-card",{key:r,attrs:{product:e.color,searchView:!0,activeColor:e.actualIndex,gridView:t.gridView}})})),t._v(" "),0===t.products.length&&!t.$store.state.customer.loading&&t.initialLoadComplete?o("h3",[t._v("\n      No products matched for "+t._s(t.collection.name)+"\n    ")]):t._e()],2):t._e(),t._v(" "),!t.collectionLocked&&t.isEscape&&t.noFilterOrSortApplied&&t.collectionSoftLockAccess?o("div",t._l(t.escapeProduct,(function(e,r,n){return o("div",{key:n,staticClass:"color-categories"},[0!==e.length?o("div",[o("h5",{staticClass:"category-heading"},[t._v(t._s(e.name))]),t._v(" "),o("p",{staticClass:"category-description"},[t._v(t._s(e.description))]),t._v(" "),o("div",{staticClass:"collection-items"},t._l(e.colors,(function(e,r){return o("product-card",{key:r,attrs:{product:t.adjustProduct(t.products[0],e.actualIndex),activeColor:e.actualIndex,gridView:t.gridView}})})),1)]):t._e()])})),0):t._e(),t._v(" "),o("div",{staticClass:"flex center"},[t.collectionLockedAndUserAuthorized?o("div",{staticClass:"locked"},[o("UnlockContent")],1):t._e()]),t._v(" "),!t.collectionLocked&&!t.collectionSoftLocked||t.$store.state.customer.authorized?t._e():o("div",{staticClass:"flex center col login"},[o("p",{staticClass:"text"},[t._v("Please login first to unlock this collection")]),t._v(" "),o("button",{staticClass:"action",on:{click:function(e){return t.$router.push("/login")}}},[t._v("\n      Access Bounipun Account\n    ")])])],1)}),[],!1,null,"25aef2ec",null);e.default=component.exports;installComponents(component,{Slideshow:o(541).default,FilterSortToggles:o(584).default,FilterProducts:o(655).default,SortProducts:o(585).default,ProductCard:o(542).default,UnlockContent:o(586).default})}}]);