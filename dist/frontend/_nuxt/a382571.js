(window.webpackJsonp=window.webpackJsonp||[]).push([[21,38,49],{500:function(e,t,n){},507:function(e,t,n){"use strict";n(500)},512:function(e,t,n){"use strict";n.r(t);n(507);var r=n(9),component=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cancel-update center"},[n("img",{attrs:{src:"/icons/dark/minus.png"},on:{click:function(t){return e.$emit("close")}}})])}),[],!1,null,"756c3226",null);t.default=component.exports},552:function(e,t,n){},564:function(e,t,n){"use strict";n(552)},583:function(e,t,n){"use strict";n.r(t);var r={props:{value:{type:Object},error:{type:Object,default:{status:!1,msg:""}},disabled:{type:Boolean,default:!1}},data:function(){return{error:{status:!1,msg:""}}}},o=(n(564),n(9)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gift-message-wrapper flex center col"},[n("div",{staticClass:"gift-message shadow"},[e._m(0),e._v(" "),n("div",{staticClass:"flex center"},[n("input",{staticClass:"text-box",attrs:{type:"text",placeholder:"To",disabled:e.disabled},domProps:{value:e.value.to},on:{input:function(t){return e.$emit("input",Object.assign({},e.value,{to:t.target.value}))}}})]),e._v(" "),n("div",{staticClass:"flex center"},[n("input",{staticClass:"text-box",attrs:{type:"text",placeholder:"From",disabled:e.disabled},domProps:{value:e.value.from},on:{input:function(t){return e.$emit("input",Object.assign({},e.value,{from:t.target.value}))}}})]),e._v(" "),n("div",{staticClass:"flex center"},[n("textarea",{staticClass:"text-box",attrs:{maxlength:"150",placeholder:"Personal Message within 150 characters",disabled:e.disabled},domProps:{value:e.value.message},on:{input:function(t){return e.$emit("input",Object.assign({},e.value,{message:t.target.value}))}}})])]),e._v(" "),e.error.status?n("p",{staticClass:"msg error"},[e._v(" "+e._s(e.error.msg)+" ")]):e._e()])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("span",[e._v(" Message Contents: ")])])}],!1,null,"2f2373d9",null);t.default=component.exports},634:function(e,t,n){},702:function(e,t,n){"use strict";n(634)},736:function(e,t,n){"use strict";n.r(t);var r=n(3),o=(n(57),n(35),n(22),{props:{model:String},data:function(){return{editMode:!1,doc:{_id:"",items:[],number:"",paymentGateway:"",transactionId:"",amount:"",currency:"",subTotal:"",discountValue:"",shippingCharge:"",combinedDeliveryConsent:!1,giftMessage:{status:!1},deliveryAddress:{firstName:"",surName:"",mobileNumber:"",email:"",addressLine1:"",addressLine2:"",city:"",postalCode:""},status:!1},allProductLists:[],loading:!1,updated:!1}},mounted:function(){},computed:{cartTotal:function(){return(parseInt(this.doc.subTotal)+parseInt(this.doc.discountValue))/100},inDevelopment:function(){return!1}},methods:{updateDocument:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$updateDocument(e.model,e.doc,e.editMode);case 3:if(n=t.sent,e.loading=!1,console.log(n.doc),n.updated){t.next=8;break}return t.abrupt("return");case 8:e.$emit("updated"),e.populateForm(n.doc),e.$flash(e);case 11:case"end":return t.stop()}}),t)})))()},deleteDocument:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$deleteDocument(e.model,e.doc._id);case 3:if(n=t.sent,e.loading=!1,n.deleted){t.next=7;break}return t.abrupt("return");case 7:e.$emit("updated"),e.resetForm(),e.$flash(e);case 10:case"end":return t.stop()}}),t)})))()},refetchDoc:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetchDocument("orders",e.doc._id,"admin");case 2:if((n=t.sent).fetched){t.next=5;break}return t.abrupt("return");case 5:console.log(n,"--FROM REFETCH DOC"),e.populateForm(n.doc);case 7:case"end":return t.stop()}}),t)})))()},populateForm:function(details){console.log("POPULATE WAS CALLED");var e=details._id,t=details.items,n=details.number,r=details.paymentGateway,o=details.transactionId,d=details.currency,c=details.amount,l=details.subTotal,m=details.combinedDeliveryConsent,v=details.giftMessage,_=details.discountValue,f=details.shippingCharge,y=details.deliveryAddress;details.status;this.doc={_id:e,items:t,number:n,paymentGateway:r,currency:d,transactionId:o,amount:c,subTotal:l,combinedDeliveryConsent:m,giftMessage:v,shippingCharge:f,discountValue:_,deliveryAddress:y},this.editMode=!0,this.$forceUpdate()},closeForm:function(){this.resetForm(),this.$emit("close")},resetForm:function(){this.populateForm({_id:"",items:[],number:"",paymentGateway:"",transactionId:"",amount:"",currency:"",subTotal:"",discountValue:"",shippingCharge:"",combinedDeliveryConsent:!1,giftMessage:{status:!1},deliveryAddress:{firstName:"",surName:"",mobileNumber:"",email:"",addressLine1:"",addressLine2:"",city:"",postalCode:""},status:!1}),this.editMode=!1},downloadInvoice:function(){Array.from(Array(5),(function(e,t){return[t+1,"Fading Tradition ","Lorem Ipsum is simply dummy text ",200.5,4.5,"m2",400.5]}))}}}),d=(n(702),n(9)),component=Object(d.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"contents"},[n("CancelUpdate",{on:{close:e.closeForm}}),e._v(" "),n("h2",{staticClass:"heading"},[e._v(e._s(e.editMode?"Update":"Add New")+" Order")]),e._v(" "),e.editMode?n("InputBox",{attrs:{label:"Order ID",disabled:"",internal:!0},model:{value:e.doc._id,callback:function(t){e.$set(e.doc,"_id",t)},expression:"doc._id"}}):e._e(),e._v(" "),n("InputBox",{attrs:{label:"Order Number",disabled:!0},model:{value:e.doc.number,callback:function(t){e.$set(e.doc,"number",t)},expression:"doc.number"}}),e._v(" "),n("InputBox",{attrs:{label:"Payment Gateway",disabled:!0},model:{value:e.doc.paymentGateway,callback:function(t){e.$set(e.doc,"paymentGateway",t)},expression:"doc.paymentGateway"}}),e._v(" "),n("InputBox",{attrs:{label:"Transaction ID",disabled:!0},model:{value:e.doc.transactionId,callback:function(t){e.$set(e.doc,"transactionId",t)},expression:"doc.transactionId"}}),e._v(" "),n("InputBox",{attrs:{label:"Amount",disabled:!0},model:{value:e.doc.amount,callback:function(t){e.$set(e.doc,"amount",t)},expression:"doc.amount"}}),e._v(" "),n("div",{staticClass:"delivery-address"},[n("label",{staticClass:"label"},[e._v(" Delivery Address: ")]),e._v(" "),n("p",{staticClass:"name"},[e._v("\n      "+e._s(e.doc.deliveryAddress.firstName)+" "+e._s(e.doc.deliveryAddress.surName)+"\n    ")]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.mobileNumber))]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.email))]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.addressLine1))]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.addressLine2))]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.city))]),e._v(" "),n("p",[e._v(e._s(e.doc.deliveryAddress.postalCode))])]),e._v(" "),n("br"),e._v(" "),n("div",{staticClass:"combined-delivery-consent"},[n("label",{staticClass:"label"},[e._v(" Combined Delivery Consent: ")]),e._v(" "),n("span",{staticClass:"note"},[e._v("\n      "+e._s(e.doc.combinedDeliveryConsent?"Opted for combined delivery":"Individual Deliveries preferred.")+"\n    ")])]),e._v(" "),void 0!==e.doc.giftMessage&&!0===e.doc.giftMessage.status?n("div",{staticClass:"order-is-a-gift"},[n("label",{staticClass:"label"},[e._v(" Gifting: ")]),e._v(" "),n("GiftMessage",{attrs:{value:e.doc.giftMessage,disabled:!0}})],1):e._e(),e._v(" "),n("div",{staticClass:"items"},[n("label",{staticClass:"label"},[e._v(" Ordered Item(s): ")]),e._v(" "),e._l(e.doc.items,(function(t,r){return n("div",{key:r,staticClass:"item"},[n("OrderItem",{attrs:{orderId:e.doc._id,item:t,allowUpdate:!1,orderCurrency:e.doc.currency},on:{subOrderUpdated:e.refetchDoc}})],1)}))],2),e._v(" "),n("div",{staticClass:"extra-charges"},[n("p",[e._v("Cart Total: "+e._s(e.doc.currency)+" "+e._s(e.cartTotal))]),e._v(" "),n("p",[e._v("Subtotal: "+e._s(e.doc.currency)+" "+e._s(e.doc.subTotal/100))]),e._v(" "),n("p",[e._v("Discount: "+e._s(e.doc.currency)+" "+e._s(e.doc.discountValue/100))]),e._v(" "),n("p",[e._v("Shipping: "+e._s(e.doc.currency)+" "+e._s(e.doc.shippingCharge/100))]),e._v(" "),n("p",[e._v("Grand Total: "+e._s(e.doc.currency)+" "+e._s(e.doc.amount/100))])]),e._v(" "),n("div",{staticClass:"center-space"},[e.loading?n("img",{staticClass:"loading",attrs:{src:"/loading.gif"}}):e._e(),e._v(" "),e.updated?n("img",{staticClass:"action-complete",attrs:{src:"/complete.gif"}}):e._e(),e._v(" "),n("button",{staticClass:"action",attrs:{disabled:e.loading},on:{click:e.updateDocument}},[e._v("\n      "+e._s(e.editMode?"Update":"Add")+" Order\n    ")]),e._v(" "),e.editMode&&e.inDevelopment?n("button",{staticClass:"action delete",attrs:{disabled:e.loading},on:{click:e.deleteDocument}},[e._v("\n      Delete\n    ")]):e._e()])],1)}),[],!1,null,"dc361004",null);t.default=component.exports;installComponents(component,{CancelUpdate:n(512).default,InputBox:n(504).default,GiftMessage:n(583).default,OrderItem:n(737).default})}}]);