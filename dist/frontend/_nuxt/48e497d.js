(window.webpackJsonp=window.webpackJsonp||[]).push([[26,38,51,61,64,66],{496:function(t,e,n){"use strict";var o=n(15),l=n(2),r=n(5),c=n(92),d=n(25),v=n(20),f=n(167),m=n(55),_=n(129),y=n(261),h=n(7),C=n(74).f,k=n(48).f,x=n(21).f,S=n(263),I=n(262).trim,T="Number",w=l.Number,B=w.prototype,N=l.TypeError,U=r("".slice),$=r("".charCodeAt),O=function(t){var e=y(t,"number");return"bigint"==typeof e?e:L(e)},L=function(t){var e,n,o,l,r,c,d,code,v=y(t,"number");if(_(v))throw N("Cannot convert a Symbol value to a number");if("string"==typeof v&&v.length>2)if(v=I(v),43===(e=$(v,0))||45===e){if(88===(n=$(v,2))||120===n)return NaN}else if(48===e){switch($(v,1)){case 66:case 98:o=2,l=49;break;case 79:case 111:o=8,l=55;break;default:return+v}for(c=(r=U(v,2)).length,d=0;d<c;d++)if((code=$(r,d))<48||code>l)return NaN;return parseInt(r,o)}return+v};if(c(T,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var A,E=function(t){var e=arguments.length<1?0:w(O(t)),n=this;return m(B,n)&&h((function(){S(n)}))?f(Object(e),n,E):e},R=o?C(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),j=0;R.length>j;j++)v(w,A=R[j])&&!v(E,A)&&x(E,A,k(w,A));E.prototype=B,B.constructor=E,d(l,T,E)}},497:function(t,e,n){},498:function(t,e,n){},500:function(t,e,n){},501:function(t,e,n){},503:function(t,e,n){"use strict";n(497)},504:function(t,e,n){"use strict";n.r(e);n(496),n(75),n(93);var o={props:{label:String,value:String|Number,placeholder:{type:String,default:""},type:{type:String,default:"text"},internal:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},uppercase:{type:Boolean,default:!1},options:{type:Object}},methods:{isBounipunUrl:function(s){return null!=s&&""!==s&&s.includes("bounipun.in")}}},l=(n(503),n(9)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-box"},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[t.internal?n("div",{staticClass:"internal"}):t._e(),t._v(" "),n("label",{staticClass:"label",attrs:{title:t.options&&t.options.title?t.options.title:""}},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("input",{staticClass:"input-box",class:{uppercase:t.uppercase},attrs:{type:t.type,placeholder:t.placeholder,disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}}),t._v(" "),t.options&&t.options.indicator?n("span",{staticClass:"indicator",class:t.isBounipunUrl(t.value)?"bounipunUrl":"externalLink"},[t._v("\n    "+t._s(t.isBounipunUrl(t.value)?"âœ… Bounipun URL":"External Link")+"\n  ")]):t._e()])}),[],!1,null,"285d608e",null);e.default=component.exports},505:function(t,e,n){"use strict";n(498)},507:function(t,e,n){"use strict";n(500)},508:function(t,e,n){"use strict";n(501)},509:function(t,e,n){"use strict";n.r(e);var o={props:{label:String,value:Boolean,activeText:{type:String,default:"Active"},inactiveText:{type:String,default:"Inactive"},disabled:{type:Boolean,default:!1},width:{type:String,default:"120px"},labelCSS:{type:String,default:""}},data:function(){return{toggleOn:!1}},methods:{toggleState:function(){this.toggleOn=!this.value,this.$emit("input",this.toggleOn)}}},l=(n(508),n(9)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-box"},[n("label",{staticClass:"label",style:t.labelCSS},[t._v(" "+t._s(t.label)+" :")]),t._v(" "),t.disabled?t._e():n("div",{staticClass:"switch-box center",class:{on:t.value},style:{width:t.width,pointerEvents:t.disabled?"none":""},on:{click:t.toggleState}},[n("div",{staticClass:"toggle center",class:{on:t.value}},[n("div",{staticClass:"circle"})]),t._v(" "),n("span",{class:{on:t.value}},[t._v("\n      "+t._s(t.value?t.activeText:t.inactiveText)+"\n    ")])]),t._v(" "),t.disabled?n("span",{class:{on:t.value}},[t._v("\n    "+t._s(t.value?t.activeText:t.inactiveText)+"\n  ")]):t._e()])}),[],!1,null,"084fb2d6",null);e.default=component.exports},510:function(t,e,n){"use strict";n.r(e);var o={props:{label:String,value:String,internal:{type:Boolean,default:!1},nonAdmin:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},l=(n(505),n(9)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-box",class:{nonAdmin:t.nonAdmin}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[t.internal?n("div",{staticClass:"internal"}):t._e(),t._v(" "),n("label",{staticClass:"label"},[t._v(" "+t._s(t.label)+" ")])]),t._v(" "),n("textarea",{staticClass:"textarea-box",attrs:{disabled:t.disabled},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])}),[],!1,null,"65b6a339",null);e.default=component.exports},512:function(t,e,n){"use strict";n.r(e);n(507);var o=n(9),component=Object(o.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cancel-update center"},[n("img",{attrs:{src:"/icons/dark/minus.png"},on:{click:function(e){return t.$emit("close")}}})])}),[],!1,null,"756c3226",null);e.default=component.exports},516:function(t,e,n){},521:function(t,e,n){"use strict";n.r(e);var o={props:{value:String,label:String,options:Array,disabled:{type:Boolean,default:!1},internal:{type:Boolean,default:!1},slim:{type:Boolean,default:!1}}},l=(n(523),n(9)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select-box"},[n("div",{staticStyle:{display:"flex","align-items":"center",width:"50%"}},[t.internal?n("div",{staticClass:"internal"}):t._e(),t._v(" "),void 0!==t.label?n("label",{staticClass:"label"},[t._v(" "+t._s(t.label)+" ")]):t._e()]),t._v(" "),n("select",{staticClass:"select shadow",class:{slim:t.slim},attrs:{disabled:t.disabled},domProps:{value:t.value},on:{change:function(e){return t.$emit("input",e.target.value)}}},t._l(t.options,(function(option,e){return n("option",{key:e,domProps:{value:option.value}},[t._v(" "+t._s(option.name)+" ")])})),0)])}),[],!1,null,"1ac5f7f6",null);e.default=component.exports},523:function(t,e,n){"use strict";n(516)},643:function(t,e,n){},709:function(t,e,n){"use strict";n(643)},743:function(t,e,n){"use strict";n.r(e);n(58),n(57),n(59);var o=n(95),l=n(3),r=(n(22),n(34),n(77),n(32),n(56),n(64),n(269),n(47),n(76),n(28),n(24),n(13),n(41),n(94),n(270),n(35),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(36),n(169),n(78));function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){c=!0,l=t},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw l}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=function(){return{_id:"",code:"",type:"type1",validity:"",validityRange:{start:new Date,end:new Date},log:[],timeline:[],blackList:[],description:"",status:!1}},f={props:{model:String},data:function(){return{editMode:!1,doc:v(),unlockTypes:[{name:"Select Type",value:null},{name:"Type 1",value:"type1"},{name:"Type 2",value:"type2"}],error:{status:!1,msg:"Document could not be saved"},loading:!1,updated:!1,customersUnlocked:[],clientName:"",link:"",allSlugs:[]}},computed:{clientTemplate:function(){var t=this.doc.description.replace("##client##",this.clientName);return t=(t=(t=(t=t.replace("##code##",this.doc.code)).replace("##link##","".concat(this.link,"&code=").concat(this.doc.code))).replace("##start##",this.$formatDate(this.doc.validityRange.start,!0))).replace("##end##",this.$formatDate(this.doc.validityRange.end,!0))},nonBlacklisted:function(){var t=this;return this.customersUnlocked.map((function(e){return-1===t.doc.blackList.findIndex((function(t){return t.customer==e._id}))&&{name:t.unlockedCustomersWithIds[e._id].name,customer:e._id}})).filter((function(t){return!1!==t}))},unlockedCustomersWithIds:function(){if(0===this.customersUnlocked.length)return{};var t,e={},n=c(this.customersUnlocked);try{for(n.s();!(t=n.n()).done;){var o=t.value,l=o._id,r=o.firstName,d=o.surName,v=o.countryIsoCode;e[l]={name:r+" "+d,countryIsoCode:v,customer:l}}}catch(t){n.e(t)}finally{n.f()}return e}},mounted:function(){this.getListofLockablePages()},methods:{getListofLockablePages:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,l,r,c,d,v,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$fetchData("collections",{},!0);case 2:return n=e.sent,l=n.docs,e.next=6,t.$fetchData("product_lists",{},!0);case 6:r=e.sent,c=r.docs,d=l.map((function(col){return"/collections?slug="+col.slug})),v=c.map((function(t){return"/lists/"+t.slug+"?c=1"})),f=[].concat(Object(o.a)(d),Object(o.a)(v)).map((function(t){return{name:location.host+t,value:location.host+t}})),t.allSlugs=f;case 12:case"end":return e.stop()}}),e)})))()},copyToClipBoard:function(t){var e=document.createElement("textarea");e.textContent=t,e.setAttribute("style","position:absolute; right:200%;"),document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),e.remove()},updateDocument:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.doc.code=t.doc.code.toUpperCase(),t.loading=!0,e.next=4,t.$updateDocument(t.model,t.doc,t.editMode);case 4:if(n=e.sent,t.loading=!1,console.log(n,"-- FROM UPDATE UNLOCK "),n.updated){e.next=12;break}return t.error.msg=n.message,t.error.status=!0,setTimeout((function(){t.error.status=!1}),2e3),e.abrupt("return");case 12:t.$emit("updated"),t.populateForm(n.doc),t.$flash(t);case 15:case"end":return e.stop()}}),e)})))()},deleteDocument:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$deleteDocument(t.model,t.doc._id);case 3:if(n=e.sent,t.loading=!1,n.deleted){e.next=7;break}return e.abrupt("return");case 7:t.$emit("updated"),t.resetForm(),t.$flash(t);case 10:case"end":return e.stop()}}),e)})))()},populateForm:function(details){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,code,o,l,r,c,d,v,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=details._id,code=details.code,o=details.type,l=details.validity,r=details.validityRange,c=details.log,d=details.timeline,v=details.blackList,f=details.description,m=details.status,t.doc={_id:n,code:code,type:o,validity:l.toString(),validityRange:r,log:c,timeline:void 0===d?[]:d,blackList:v,description:f,status:m},e.next=4,t.populateUsageLog();case 4:t.editMode=!0;case 5:case"end":return e.stop()}}),e)})))()},closeForm:function(){this.resetForm(),this.$emit("close")},resetForm:function(){this.populateForm(v()),this.customersUnlocked=[],this.editMode=!1},populateUsageLog:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,l,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],l=t.doc.log.map((function(t){return t.user})),r=t.doc.timeline.map((function(t){return t.user})),n=[].concat(Object(o.a)(l),Object(o.a)(r)),n=Object(o.a)(new Set(n)),console.log(n.length),e.next=8,t.$axios.$post("/populate",{model:"users",fields:"firstName surName countryIsoCode",_ids:n});case 8:(c=e.sent).length>0&&(t.customersUnlocked=c);case 10:case"end":return e.stop()}}),e)})))()},addToBlackList:function(data){!1!==data.selectedObject.customer?this.doc.blackList.push(data.selectedObject):this.populateUsageLog()},removeFromBlacklist:function(t){this.doc.blackList.splice(t,1)},getCountry:function(t){var e=Object(r.b)(t);return!1===e?" ":e.unicodeFlag}}},m=(n(709),n(9)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents"},[n("CancelUpdate",{on:{close:t.closeForm}}),t._v(" "),n("h2",{staticClass:"heading"},[t._v(t._s(t.editMode?"Update":"Add New")+" Unlock Code")]),t._v(" "),t.editMode?n("InputBox",{attrs:{label:"Unlock ID",disabled:"",internal:!0},model:{value:t.doc._id,callback:function(e){t.$set(t.doc,"_id",e)},expression:"doc._id"}}):t._e(),t._v(" "),n("InputBox",{attrs:{label:"Unlock Code"},model:{value:t.doc.code,callback:function(e){t.$set(t.doc,"code",e)},expression:"doc.code"}}),t._v(" "),n("SelectBox",{attrs:{options:t.unlockTypes,label:"Select Unlock Type"},model:{value:t.doc.type,callback:function(e){t.$set(t.doc,"type",e)},expression:"doc.type"}}),t._v(" "),n("InputBox",{attrs:{label:"Validity (Total number of allowed uses)",type:"number"},model:{value:t.doc.validity,callback:function(e){t.$set(t.doc,"validity",e)},expression:"doc.validity"}}),t._v(" "),n("label",{staticClass:"label"},[t._v(" Validity Range ")]),t._v(" "),n("client-only",[n("v-datepicker",{attrs:{color:"blue","is-range":"","from-date":t.doc.validityRange.start},model:{value:t.doc.validityRange,callback:function(e){t.$set(t.doc,"validityRange",e)},expression:"doc.validityRange"}})],1),t._v(" "),n("div",{staticClass:"section"},[n("label",{staticClass:"label"},[t._v(" Invitation: ")]),t._v(" "),n("InputBox",{attrs:{label:"Client Name",internal:!0},model:{value:t.clientName,callback:function(e){t.clientName=e},expression:"clientName"}}),t._v(" "),n("SelectBox",{attrs:{internal:!0,label:"Select Link",options:t.allSlugs},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),t._v(" "),n("TextBox",{attrs:{label:"Invitation Template:",nonAdmin:!0,internal:!0},model:{value:t.doc.description,callback:function(e){t.$set(t.doc,"description",e)},expression:"doc.description"}}),t._v(" "),t._m(0),t._v(" "),n("br"),t._v(" "),n("label",{staticClass:"label"},[t._v(" Client Template: ")]),n("br"),t._v(" "),n("span",{staticStyle:{"font-size":"13px"}},[t._v(" "+t._s(t.clientTemplate)+" ")]),t._v(" "),n("button",{staticClass:"copy",on:{click:function(e){return t.copyToClipBoard(t.clientTemplate)}}},[t._v("COPY")])],1),t._v(" "),n("div",{staticClass:"log current"},[n("label",{staticClass:"label"},[t._v(" Current Log: ")]),t._v(" "),n("div",{staticClass:"flex center col"},t._l(t.doc.log,(function(e,o){return n("div",{key:o,staticClass:"item flex around"},[t.customersUnlocked.length>0?n("span",{staticClass:"flag"},[n("b",[t._v(" Country: ")]),t._v(" "),n("br"),t._v("\n          "+t._s(t.unlockedCustomersWithIds[e.user].countryIsoCode+" "+t.getCountry(t.unlockedCustomersWithIds[e.user].countryIsoCode))+"\n        ")]):t._e(),t._v(" "),t.customersUnlocked.length>0?n("span",[n("b",[t._v(" Name: ")]),t._v(" "),n("br"),t._v("\n          "+t._s(t.unlockedCustomersWithIds[e.user].name)+"\n        ")]):t._e(),t._v(" "),n("span",{staticClass:"timestamp"},[n("b",[t._v(" Used on: ")]),t._v(" "),n("br"),t._v("\n          "+t._s(t.$formatDate(e.usedOn)))])])})),0)]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"log timeline"},[n("label",{staticClass:"label"},[t._v(" Complete Timeline: ")]),t._v(" "),t._l(t.doc.timeline,(function(e,o){return n("div",{key:o,staticClass:"item flex around"},[t.customersUnlocked.length>0?n("span",{staticClass:"flag"},[n("b",[t._v(" Country: ")]),t._v(" "),n("br"),t._v("\n        "+t._s(t.unlockedCustomersWithIds[e.user].countryIsoCode+" "+t.getCountry(t.unlockedCustomersWithIds[e.user].countryIsoCode))+"\n      ")]):t._e(),t._v(" "),t.customersUnlocked.length>0?n("span",[n("b",[t._v("Name: ")]),t._v(" "),n("br"),t._v("\n        "+t._s(t.unlockedCustomersWithIds[e.user].name)+"\n      ")]):t._e(),t._v(" "),n("span",[n("b",[t._v("Action:")]),t._v(" "),n("br"),t._v("\n        "+t._s(e.action))]),t._v(" "),n("span",{staticClass:"timestamp"},[n("b",[t._v(" Used on:")]),t._v(" "),n("br"),t._v("\n        "+t._s(t.$formatDate(e.taken)))])])}))],2),t._v(" "),n("div",{staticClass:"black-list"},[t.customersUnlocked.length>0?n("div",[n("label",{staticClass:"label"},[t._v(" Black List: ")]),t._v(" "),n("autocomplete",{ref:"autocomplete",attrs:{inputClass:"small",source:t.nonBlacklisted},on:{enter:t.addToBlackList,selected:t.addToBlackList}})],1):t._e(),t._v(" "),n("div",{staticClass:"list"},t._l(t.doc.blackList,(function(e,o){return n("div",{key:o,staticClass:"selected"},[n("span",[t._v(" "+t._s(e.name)+" ")]),t._v(" "),n("img",{attrs:{src:"/icons/light/trash.png"},on:{click:function(e){return t.removeFromBlacklist(o)}}})])})),0),t._v(" "),n("Toggle",{attrs:{label:"Status"},model:{value:t.doc.status,callback:function(e){t.$set(t.doc,"status",e)},expression:"doc.status"}}),t._v(" "),n("div",{staticClass:"center-space"},[t.loading?n("img",{staticClass:"loading",attrs:{src:"/loading.gif"}}):t._e(),t._v(" "),t.updated?n("img",{staticClass:"action-complete",attrs:{src:"/complete.gif"}}):t._e(),t._v(" "),n("button",{staticClass:"action",attrs:{disabled:t.loading},on:{click:t.updateDocument}},[t._v("\n        "+t._s(t.editMode?"Apply Changes":"Add Unlock Code")+"\n      ")]),t._v(" "),t.editMode?n("button",{staticClass:"action delete",attrs:{disabled:t.loading},on:{click:t.deleteDocument}},[t._v("\n        Delete\n      ")]):t._e()]),t._v(" "),n("Toast",{attrs:{msg:t.error.msg,show:t.error.status,error:!0}})],1)],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex center"},[n("span",{staticStyle:{"font-size":"12px",color:"gray","text-align":"center",width:"100%"}},[t._v(" Variable that can be used within ##: [client, link, start, end ]")])])}],!1,null,"6918cd05",null);e.default=component.exports;installComponents(component,{CancelUpdate:n(512).default,InputBox:n(504).default,SelectBox:n(521).default,TextBox:n(510).default,Toggle:n(509).default,Toast:n(530).default})}}]);