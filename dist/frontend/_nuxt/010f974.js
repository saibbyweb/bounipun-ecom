(window.webpackJsonp=window.webpackJsonp||[]).push([[23,32,36,38,43,61,64,81],{497:function(e,t,o){},498:function(e,t,o){},500:function(e,t,o){},503:function(e,t,o){"use strict";o(497)},504:function(e,t,o){"use strict";o.r(t);o(496),o(75),o(93);var n={props:{label:String,value:String|Number,placeholder:{type:String,default:""},type:{type:String,default:"text"},internal:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},uppercase:{type:Boolean,default:!1},options:{type:Object}},methods:{isBounipunUrl:function(s){return null!=s&&""!==s&&s.includes("bounipun.in")}}},r=(o(503),o(9)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"input-box"},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[e.internal?o("div",{staticClass:"internal"}):e._e(),e._v(" "),o("label",{staticClass:"label",attrs:{title:e.options&&e.options.title?e.options.title:""}},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),o("input",{staticClass:"input-box",class:{uppercase:e.uppercase},attrs:{type:e.type,placeholder:e.placeholder,disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),e.options&&e.options.indicator?o("span",{staticClass:"indicator",class:e.isBounipunUrl(e.value)?"bounipunUrl":"externalLink"},[e._v("\n    "+e._s(e.isBounipunUrl(e.value)?"âœ… Bounipun URL":"External Link")+"\n  ")]):e._e()])}),[],!1,null,"285d608e",null);t.default=component.exports},505:function(e,t,o){"use strict";o(498)},507:function(e,t,o){"use strict";o(500)},510:function(e,t,o){"use strict";o.r(t);var n={props:{label:String,value:String,internal:{type:Boolean,default:!1},nonAdmin:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},r=(o(505),o(9)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"text-box",class:{nonAdmin:e.nonAdmin}},[o("div",{staticStyle:{display:"flex","align-items":"center"}},[e.internal?o("div",{staticClass:"internal"}):e._e(),e._v(" "),o("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")])]),e._v(" "),o("textarea",{staticClass:"textarea-box",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}})])}),[],!1,null,"65b6a339",null);t.default=component.exports},512:function(e,t,o){"use strict";o.r(t);o(507);var n=o(9),component=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cancel-update center"},[o("img",{attrs:{src:"/icons/dark/minus.png"},on:{click:function(t){return e.$emit("close")}}})])}),[],!1,null,"756c3226",null);t.default=component.exports},516:function(e,t,o){},517:function(e,t,o){},520:function(e,t,o){},521:function(e,t,o){"use strict";o.r(t);var n={props:{value:String,label:String,options:Array,disabled:{type:Boolean,default:!1},internal:{type:Boolean,default:!1},slim:{type:Boolean,default:!1}}},r=(o(523),o(9)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"select-box"},[o("div",{staticStyle:{display:"flex","align-items":"center",width:"50%"}},[e.internal?o("div",{staticClass:"internal"}):e._e(),e._v(" "),void 0!==e.label?o("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]):e._e()]),e._v(" "),o("select",{staticClass:"select shadow",class:{slim:e.slim},attrs:{disabled:e.disabled},domProps:{value:e.value},on:{change:function(t){return e.$emit("input",t.target.value)}}},e._l(e.options,(function(option,t){return o("option",{key:t,domProps:{value:option.value}},[e._v(" "+e._s(option.name)+" ")])})),0)])}),[],!1,null,"1ac5f7f6",null);t.default=component.exports},523:function(e,t,o){"use strict";o(516)},526:function(e,t,o){"use strict";o(517)},528:function(e,t,o){"use strict";o.r(t);o(41);var n={props:{heading:{type:String,default:"Heading 1"},expanded:{type:Boolean,default:!1},light:{type:Boolean,default:!1},noMargin:{type:Boolean,default:!1}},data:function(){return{active:!1}},watch:{expanded:function(e){e&&(this.active=!0)}},mounted:function(){var e=this;this.expanded&&void 0!==this.$refs.content&&(this.active=!0),"Base Color"===this.heading&&(this.toggle(),setTimeout((function(){return e.toggle()}),600))},computed:{maxHeight:function(){return this.active?this.$refs.content.scrollHeight+"px":"0px"}},methods:{toggle:function(){this.active=!this.active},open:function(){this.active=!0,this.updateHeight()},updateHeight:function(){}}},r=(o(526),o(9)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sw-accordion"},[o("div",{class:[{active:e.active},{light:e.light},"accordion"],on:{click:function(t){return e.toggle()}}},[o("span",{staticClass:"title"},[e._v(" "+e._s(e.heading)+" ")]),e._v(" "),o("span",{staticClass:"switch"},[e._v(" "+e._s(e.active?"-":"+")+" ")])]),e._v(" "),o("div",{ref:"content",staticClass:"content",class:{noMargin:e.noMargin},style:{maxHeight:e.maxHeight}},[e._t("default",(function(){return[o("span",[e._v("Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.")])]}))],2)])}),[],!1,null,"ae8fda4c",null);t.default=component.exports},532:function(e,t,o){"use strict";o(520)},535:function(e,t,o){"use strict";o.r(t);var n=o(3),r=(o(22),o(13),o(33),o(35),o(36),o(547),o(266),o(28),o(41),o(169),{props:{label:{type:String,default:"Add Files"},multipleUpload:{type:Boolean,default:!0},uploadType:{type:String,default:"non-product"},uploaded:Array},data:function(){return{cancelToken:this.$axios.CancelToken,images:[],uploadImageAPI:"/uploadImage"}},methods:{clearFileSelection:function(){this.images=[]},assignImages:function(e){var t=this;if(console.log("ASSIGN IMAGES WAS CALLED"),!(!e.length>0)){this.images=[];e.forEach((function(image){var e={file:null,previewURL:"https://bounipun-ecom.s3.ap-south-1.amazonaws.com/original/"+image.path,cancelToken:null,uploadPercentage:100,uploaded:!0,mainImage:image.mainImage,_id:image._id,path:image.path};t.images.push(e)}))}},addFiles:function(){this.$refs.selector.click()},handleFileSelection:function(){var e=this,t=this.$refs.selector.files;this.multipleUpload||(this.images=[]),t.forEach((function(t){var o=e.createImageObject(t);e.images.push(o),e.uploadFile(o),e.resetFileSelection()}))},createImageObject:function(e){return{file:e,previewURL:URL.createObjectURL(e),cancelToken:this.cancelToken.source(),uploadPercentage:0,uploaded:!1,mainImage:!1,_id:"",path:""}},uploadFile:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var n,r,c,l,d,f;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(n=new FormData).append("productImage",e.file),n.append("uploadType",t.uploadType),r=t.setUploadConfig(e),c=t.$axios.$post(t.uploadImageAPI,n,r),o.next=7,t.$task(c);case 7:if(l=o.sent,d=l.response,!(f=l.error)){o.next=13;break}return t.$axios.isCancel(f)&&console.log("Upload request cancelled"),o.abrupt("return");case 13:t.updateImageObject(e,d);case 14:case"end":return o.stop()}}),o)})))()},setUploadConfig:function(e){return{cancelToken:e.cancelToken.token,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(progress){e.uploadPercentage=parseInt(Math.round(progress.loaded/progress.total*100))}}},updateImageObject:function(e,t){e.uploaded=100===e.uploadPercentage,e.path=t.name,e._id=t._id,this.$emit("updated",this.images)},setMainImage:function(e,t){var o=this;if(t)for(var i=0;i<this.images.length;i++)i!==e&&(this.images[i].mainImage=!1);setTimeout((function(){o.images[e].mainImage=!0,o.$emit("updated",o.images)}),100)},removeFile:function(e){this.images[e].uploaded||this.images[e].cancelToken.cancel(),this.images.splice(e,1),this.$emit("updated",this.images)},resetFileSelection:function(){this.$refs.selector.type="text",this.$refs.selector.type="file"}}}),c=(o(532),o(9)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"upload-container"},[o("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),o("input",{ref:"selector",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*",multiple:e.multipleUpload},on:{change:function(t){return e.handleFileSelection()}}}),e._v(" "),o("button",{staticClass:"file-selector",on:{click:function(t){return e.addFiles()}}},[e._v("\n    Select File(s)\n  ")]),e._v(" "),o("div",{staticClass:"previews"},[e._l(e.images,(function(image,t){return o("div",{key:t,staticClass:"preview center",class:{uploading:!image.uploaded},style:{backgroundImage:"url("+image.previewURL+")"}},[o("div",{staticClass:"actions center-col"},[o("img",{staticClass:"remove-file",attrs:{src:"/icons/light/remove-icon.png"},on:{click:function(o){return e.removeFile(t)}}}),e._v(" "),e.multipleUpload?o("input",{directives:[{name:"model",rawName:"v-model",value:image.mainImage,expression:"image.mainImage"}],staticClass:"set-main-image",attrs:{type:"checkbox"},domProps:{checked:image.mainImage,checked:Array.isArray(image.mainImage)?e._i(image.mainImage,null)>-1:image.mainImage},on:{change:[function(t){var o=image.mainImage,n=t.target,r=!!n.checked;if(Array.isArray(o)){var c=e._i(o,null);n.checked?c<0&&e.$set(image,"mainImage",o.concat([null])):c>-1&&e.$set(image,"mainImage",o.slice(0,c).concat(o.slice(c+1)))}else e.$set(image,"mainImage",r)},function(o){return e.setMainImage(t,o.target.checked)}]}}):e._e()]),e._v(" "),image.uploaded?e._e():o("div",{staticClass:"progress center"},[o("vue-ellipse-progress",{attrs:{color:"#41bf89",size:70,thickness:7,legend:!0,fontSize:"1rem",progress:image.uploadPercentage}},[o("img",{staticClass:"upload-icon",attrs:{slot:"legend-caption",wdith:"60px",src:"/icons/light/upload-cloud.svg"},slot:"legend-caption"})])],1),e._v(" "),image.mainImage?o("span",{staticClass:"main-image"},[e._v(" Main Image ")]):e._e(),e._v(" "),o("span",{staticClass:"numbering"},[e._v(" "+e._s(t+1)+" ")])])})),e._v(" "),0===e.images.length?o("div",{staticClass:"not-uploaded",staticStyle:{"margin-left":"10px"}},[o("img",{attrs:{src:"/icons/light/upload-cloud.svg"}}),e._v(" "),o("span",[e._v(" No Image(s) uploaded yet ")])]):e._e()],2)])}),[],!1,null,"5d760990",null);t.default=component.exports},574:function(e,t,o){},575:function(e,t,o){},593:function(e,t,o){"use strict";o(574)},594:function(e,t,o){"use strict";o(575)},638:function(e,t,o){"use strict";o.r(t);var n=o(3),r=(o(22),o(76),o(41),o(47),o(28),o(13),o(33),o(264),o(40),o(169),o(560));t.default={data:function(){return{types:[{name:"Select Type",value:null},{name:"Under Bounipun",value:"under-bounipun"},{name:"Third Party",value:"third-party"}],availabilityTypes:[{name:"Select Availablity Type",value:""},{name:"Made To Order",value:"made-to-order"},{name:"Ready To Ship",value:"ready-to-ship"}],colorSourceTypes:[{name:"Select Source",value:""},{name:"Bounipun Colors",value:"bounipun-colors"},{name:"Custom",value:"custom"}],genders:[{name:"Select Preferred Gender",value:""},{name:"For Her",value:"for-her"},{name:"For Him",value:"for-him"},{name:"For Him & Her",value:"for-him-and-her"},{name:"N/A",value:"na"}]}},computed:{collectionInflationPercentage:function(){var e=this,t=0;if("under-bounipun"===this.doc.type){var o=this.collections.findIndex((function(col){return col.value===e.doc.bounipun_collection}));if(-1===o)return 0;t=this.collections[o].inflationPercentage}return t},bounipunColors:function(){return"bounipun-colors"===this.doc.colorSource},thirdPartyProduct:function(){return"third-party"===this.doc.type},readyToShip:function(){return"ready-to-ship"===this.doc.availabilityType},rtsAndUnderBounipun:function(){return this.readyToShip&&!this.thirdPartyProduct},underAutograph:function(){return"60523a3648d11650a841b82a"===this.doc.bounipun_collection&&"third-party"!==this.doc.type},underEscape:function(){return"60522ab3be493200150ff835"===this.doc.bounipun_collection&&"third-party"!==this.doc.type}},methods:{setMainColor:function(e){for(var t=this,i=0;i<this.doc.colors.length;i++)this.doc.colors[i].mainColor=!1;setTimeout((function(){t.doc.colors[e].mainColor=!0,t.doc.colors[e].status=!0,t.$forceUpdate()}),100)},isActiveColor:function(e){return this.doc.colors[e].mainColor},fetchBaseColors:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetchCollection("base_colors");case 2:if((o=t.sent).fetched&&0!==o.docs.length){t.next=5;break}return t.abrupt("return");case 5:e.baseColors=o.docs.map((function(e){return{name:e.name.toUpperCase(),value:e.name}})),e.baseColors.unshift({name:"Select Color",value:""});case 7:case"end":return t.stop()}}),t)})))()},imageListUpdated:function(e,t){this.doc.colors[t].images=e},fetchActiveCurrencies:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("/findDocuments",{model:"currency",filters:{adminEnabled:!0,status:!0}});case 2:if(0!=(o=t.sent).resolved){t.next=5;break}return t.abrupt("return");case 5:n=o.response,e.currencies=n,e.currencies.forEach((function(t){var code=t.code,o=e.doc.directPricing[code];e.doc.directPricing[code]=void 0===o?o:""}));case 8:case"end":return t.stop()}}),t)})))()},checkValidPrice:function(e){return"number"==typeof e||null!=e&&""!==e.trim()},checkAllPrices:function(e,t){var o=this;return!1!==this.checkValidPrice(e)&&Object.keys(t).every((function(code){return o.checkValidPrice(t[code])}))},addNewColor:function(e){this.doc.colors.push({_id:e._id,name:e.name,code:e.code,images:[],disclaimer:"",mainColor:!1,status:!1,key:Object(r.a)()})},colorDeselected:function(e){var t=this.doc.colors.findIndex((function(col){return col._id===e._id}));console.log(e,t,"DESELECTED"),this.removeColor(t)},removeColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.doc.colors[e];this.doc.colors.splice(e,1),this.bounipunColors&&t&&this.$refs.colorPicker.deselectColor(o)},deleteDocument:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$deleteDocument(e.model,e.doc._id);case 3:if(o=t.sent,e.loading=!1,o.deleted){t.next=10;break}return e.errorToast.status=!0,e.errorToast.msg=void 0!==o.msg?o.msg:"Something went wrong",setTimeout((function(){return e.errorToast.status=!1}),2200),t.abrupt("return");case 10:e.$emit("updated"),e.resetForm(),e.$flash(e);case 13:case"end":return t.stop()}}),t)})))()},closeForm:function(){this.resetForm(),this.$emit("resetVariants"),this.$emit("close")}}}},639:function(e,t,o){},657:function(e,t,o){"use strict";o.r(t);var n=o(3),r=(o(22),o(40),o(13),o(33),o(47),o(28),o(76),o(169),{data:function(){return{loading:!1,model:"colors",allColors:[],selectedColors:[]}},mounted:function(){this.fetchColors()},methods:{fetchColors:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$fetchCollection(e.model,"admin");case 3:o=t.sent,e.loading=!1,Object.keys(o.docs).forEach((function(t){e.allColors.push({name:t,colors:o.docs[t].map((function(t){return{_id:t._id,name:t.name,code:t.code,image:e.$getOriginalPath(t.image)}}))})})),console.log(e.allColors,"colors fetched");case 8:case"end":return t.stop()}}),t)})))()},isSelected:function(e){return-1!==this.selectedColors.findIndex((function(t){return t._id===e}))},toggleSelect:function(e){var t=this.selectedColors,o=t.findIndex((function(col){return col._id===e._id}));if(-1!==o){var n=t[o];return t.splice(o,1),void this.$emit("colorRemoved",n)}console.log("new color pushed");var r={_id:e._id,name:e.name,code:e.code};t.push(r),this.selectedColors=t,this.$emit("colorAdded",r)},deselectColor:function(e){var t=this.selectedColors.findIndex((function(col){return col._id===e._id}));-1!==t&&this.selectedColors.splice(t,1)},populateColorSelection:function(e){this.selectedColors=e.map((function(e){return{_id:e._id,name:e.name,code:e.code}})),console.log("list populated")}}}),c=(o(593),o(9)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"color-picker"},[o("h2",{staticClass:"heading",on:{click:e.fetchColors}},[e._v(" Bounipun Colors ")]),e._v(" "),e._l(e.allColors,(function(t,n){return o("div",{key:n,staticClass:"color-data"},[o("Accordion",{attrs:{heading:t.name}},[o("div",{staticClass:"color-list"},e._l(t.colors,(function(t){return o("div",{key:t._id,staticClass:"color-box center-col",on:{click:function(o){return e.toggleSelect(t)}}},[e.isSelected(t._id)?o("img",{staticClass:"selected",attrs:{src:"/icons/green_check.png"}}):e._e(),e._v(" "),o("div",{staticClass:"shadow box",class:{active:e.isSelected(t._id)},staticStyle:{height:"40px",width:"40px"},style:{backgroundImage:"url("+t.image+")"}}),e._v(" "),o("span",{staticClass:"color-name"},[e._v(" "+e._s(t.name)+" ")]),e._v(" "),o("span",{staticClass:"color-code"},[e._v(" "+e._s(t.code)+" ")])])})),0)])],1)}))],2)}),[],!1,null,"153a2bc0",null);t.default=component.exports;installComponents(component,{Accordion:o(528).default})},658:function(e,t,o){"use strict";o.r(t);o(13),o(270),o(35),o(271),o(272),o(273),o(274),o(275),o(276),o(277),o(278),o(279),o(280),o(281),o(282),o(283),o(284),o(285),o(286),o(36),o(47),o(33),o(24);var n={props:{label:String,options:{type:Array,default:function(){return[]}}},computed:{categories:function(){return new Set(this.options.map((function(e){return e.category})))},categoriesCheckedMap:function(){var e=this,map={};return this.categories.forEach((function(t){map[t]=e.ifAnyOptionIsChecked(t)})),map}},methods:{getOptionsUnderCategory:function(e){return this.options.filter((function(t){return t.category===e}))},ifAnyOptionIsChecked:function(e){return this.getOptionsUnderCategory(e).some((function(e){return e.checked}))}}},r=(o(594),o(9)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"checkboxes-container"},[o("label",{staticClass:"label"},[e._v(" "+e._s(e.label)+" ")]),e._v(" "),e._l(e.categories,(function(t){return o("div",{key:t},[o("Accordion",{attrs:{heading:t,expanded:e.categoriesCheckedMap[t]}},[o("div",{staticClass:"checkboxes center"},e._l(e.getOptionsUnderCategory(t),(function(option,t){return o("div",{key:t,staticClass:"checkbox center-col"},[o("input",{directives:[{name:"model",rawName:"v-model",value:option.checked,expression:"option.checked"}],staticClass:"check-input",attrs:{type:"checkbox"},domProps:{value:option.value,checked:Array.isArray(option.checked)?e._i(option.checked,option.value)>-1:option.checked},on:{change:function(t){var o=option.checked,n=t.target,r=!!n.checked;if(Array.isArray(o)){var c=option.value,l=e._i(o,c);n.checked?l<0&&e.$set(option,"checked",o.concat([c])):l>-1&&e.$set(option,"checked",o.slice(0,l).concat(o.slice(l+1)))}else e.$set(option,"checked",r)}}}),e._v(" "),o("label",{staticClass:"label"},[e._v(" "+e._s(option.name)+" ")])])})),0)])],1)}))],2)}),[],!1,null,"739f61e2",null);t.default=component.exports;installComponents(component,{Accordion:o(528).default})},705:function(e,t,o){"use strict";o(639)},739:function(e,t,o){"use strict";o.r(t);o(53),o(54);var n=o(39),r=o(23),c=o(3),l=(o(22),o(24),o(13),o(33),o(265),o(76),o(169),o(47),o(170),o(28),o(32),o(56),o(41),o(40),o(638));function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={mixins:[l.default],props:{model:String,collections:Array,variants:Array,fabrics:Array},watch:{selectedVariantsWithFabricOptions:function(e){},doc:{handler:function(e){"third-party"===e.type&&(this.doc.colorSource="custom"),this.underEscape||(this.doc.colorSource="custom")},deep:!0},underEscape:function(e,t){e?this.doc.colorSource="bounipun-colors":e||(this.doc.colorSource="custom")}},computed:{colorSources:function(){return this.underEscape?this.colorSourceTypes.filter((function(source){return"custom"!==source.value})):this.colorSourceTypes.filter((function(source){return"bounipun-colors"!==source.value}))},selectedVariants:function(){var e=this.variants.filter((function(e){return e.checked}));console.log(this.doc.variants.length,e.length);var t=null;if(this.doc.variants.forEach((function(o){void 0!==e.find((function(e){return e._id===o._id}))||(t=o._id)})),null!==t){var o=this.doc.variants.findIndex((function(e){return e._id===t}));-1!==o&&this.doc.variants.splice(o,1)}return e},selectedVariantsWithFabricOptions:function(){var e=this;return this.selectedVariants.map((function(t){var o=e.fabrics.filter((function(e){return e.code.startsWith(t.code)}));return o.forEach((function(t){t.pricing={},e.currencies.forEach((function(e){t.pricing[e.code]=""}))})),{_id:t._id,name:t.name,code:t.code,fabrics:o}}))}},data:function(){return{editMode:!1,doc:{_id:"",styleId:"",printNo:"",gender:"",name:"",alias:"",slug:"",description:"",type:"",availabilityType:"",bounipun_collection:null,colorSource:"",variants:[],colors:[],directPrice:"",directPricing:{},rtsDirectVariant:"",rtsDirectFabric:"",stock:"",lock:!1,sale:null,askForPrice:!1,status:!1},baseColors:[],loading:!1,updated:!1,currencies:[],errorToast:{status:!1,msg:"Base Price not set"},error:{status:!1,msg:""},enableSuggestedPricing:!0,enableRTSSuggestedPricing:!0}},mounted:function(){this.fetchBaseColors(),this.fetchActiveCurrencies()},methods:{addNewRTSEntry:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var n,r,c,l,d;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(e),void 0!==(n=t.variants.find((function(t){return t.value===e.rtsVariant})))){o.next=4;break}return o.abrupt("return");case 4:if(void 0!==(r=t.fabrics.find((function(t){return t.value===e.rtsFabric})))){o.next=7;break}return o.abrupt("return");case 7:if(c=t.doc.styleId+"/"+n.code+"/"+r.code,l={alias:"",availabilityType:"ready-to-ship",bounipun_collection:t.doc.bounipun_collection,colorSource:"custom",colors:[e],description:t.doc.description,directPrice:e.directPrice,directPricing:e.directPricing,rtsDirectVariant:n._id,rtsDirectFabric:r._id,stock:e.rtsStock,gender:t.doc.gender,name:t.doc.name,printNo:t.doc.printNo,slug:"",status:!0,styleId:c,type:"under-bounipun",variants:[],_id:""},!1!==t.checkAllPrices(l.directPrice,l.directPricing)){o.next=12;break}return o.abrupt("return");case 12:return t.loading=!0,o.next=15,t.$updateDocument(t.model,l,!1);case 15:if(d=o.sent,t.loading=!1,d.updated){o.next=19;break}return o.abrupt("return");case 19:t.$emit("updated"),e.rtsStock="ADDED";case 21:case"end":return o.stop()}}),o)})))()},getRTSFabrics:function(e){var t=this.variants.find((function(t){return t.value===e}));return void 0===t?[{name:"Select Variant First",value:""}]:this.fabrics.filter((function(e){return e.code.startsWith(t.code)})).map((function(e){return e.name="".concat(e.code),e}))},toggleRTSPanel:function(e){e.showRTSPanel=!e.showRTSPanel,this.$forceUpdate()},populateVariants:function(e){var t=this;e.forEach((function(e){t.variants.find((function(t){return t._id===e._id})).checked=!0}))},fabricSelectionUpdated:function(e){var details={_id:e._id,fabrics:e.fabrics},t=this.doc.variants.findIndex((function(element){return element._id===e._id}));-1===t?this.doc.variants.push(details):this.doc.variants[t]=details,this.doc.variants=this.doc.variants.filter((function(e){return 0!==e.fabrics.length}))},updateDocument:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var details,o,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(details=f({},e.doc),"under-bounipun"===e.doc.type&&"ready-to-ship"===e.doc.availabilityType||(delete details.rtsDirectVariant,delete details.rtsDirectFabric),o=!1,"made-to-order"===e.doc.availabilityType?(n=e.doc.variants,o=n.every((function(t){return t.fabrics.every((function(t){return e.checkAllPrices(t.price,t.pricing)}))}))):o=e.checkAllPrices(e.doc.directPrice,e.doc.directPricing),0!=o){t.next=9;break}return e.errorToast.status=!0,e.errorToast.msg="Pricing is not set for all currencies.",setTimeout((function(){return e.errorToast.status=!1}),2200),t.abrupt("return");case 9:return e.loading=!0,t.next=12,e.$updateDocument(e.model,details,e.editMode);case 12:if(r=t.sent,e.loading=!1,r.updated){t.next=16;break}return t.abrupt("return");case 16:e.$emit("updated"),e.doc._id=r.doc._id,e.editMode=!0,e.$flash(e);case 20:case"end":return t.stop()}}),t)})))()},baseDirectPriceUpdated:function(){this.enableSuggestedPricing&&this.setSuggestedPrices(this.doc.directPricing,this.doc.directPrice)},baseRTSDirectPriceUpdated:function(e){this.enableRTSSuggestedPricing&&this.setSuggestedPrices(e.directPricing,e.directPrice)},setSuggestedPrices:function(e,t){var o="under-bounipun"===this.doc.type&&this.collectionInflationPercentage;this.setNonINRPrices(e,t,o)},setNonINRPrices:function(e,t,o){for(var r=this,c=Object.keys(e),l=function(){var code=f[d],n=r.currencies.findIndex((function(e){return e.code===code}));if(-1===n)return{v:void 0};if(void 0===t)return{v:void 0};var c=r.currencies[n];!1===o&&"String"==typeof(o=c.defaultInflationPercentage)&&(o=parseInt(o));var l=t*(1+o/100)/c.exchangeRateINR;e[code]=parseInt(l)},d=0,f=c;d<f.length;d++){var v=l();if("object"===Object(n.a)(v))return v.v}this.$forceUpdate()},populateForm:function(details){var e=this,t=details._id,o=details.styleId,n=details.printNo,r=details.gender,c=details.name,l=details.alias,d=details.slug,f=details.description,v=details.type,m=details.availabilityType,h=details.bounipun_collection,_=details.colorSource,y=details.variants,C=details.colors,x=details.directPrice,k=details.directPricing,P=details.stock,S=details.rtsDirectVariant,T=details.rtsDirectFabric,I=details.lock,$=details.sale,w=details.askForPrice,A=details.status;this.doc={_id:t,styleId:o,printNo:n,gender:r,name:c,alias:l,slug:d,description:f,type:v,availabilityType:m,bounipun_collection:h,colorSource:_,variants:y,colors:C,directPrice:x,directPricing:void 0===k?{}:k,rtsDirectVariant:S,rtsDirectFabric:T,stock:void 0===P?"":P,lock:I,sale:$,askForPrice:w,status:A},this.doc.colors.forEach((function(t){t.directPricing={},e.currencies.forEach((function(e){var code=e.code;return t.directPricing[code]=""}))})),this.currencies.forEach((function(t){var code=t.code;void 0===e.doc.directPricing[code]&&(e.doc.directPricing[code]="")})),this.editMode=!0},resetForm:function(){this.populateForm({_id:"",styleId:"",printNo:"",gender:"",name:"",alias:"",slug:"",description:"",type:"",availabilityType:"",bounipun_collection:null,colorSource:"",variants:[],colors:[],directPrice:"",directPricing:{},rtsDirectVariant:"",rtsDirectFabric:"",stock:"",lock:!1,sale:null,askForPrice:!1,status:!1}),this.editMode=!1}}},m=(o(705),o(9)),component=Object(m.a)(v,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"contents"},[o("CancelUpdate",{on:{close:e.closeForm}}),e._v(" "),o("h2",{staticClass:"heading"},[e._v(e._s(e.editMode?"Update":"Add New")+" Product")]),e._v(" "),o("div",{staticClass:"center"},[e.editMode?o("a",{attrs:{href:"/products?_id="+e.doc._id,target:"_blank"}},[o("span",{staticStyle:{background:"#333","text-align":"center",color:"white","font-size":"12px",padding:"2px 4px","border-radius":"2px"}},[e._v("\n        Preview Product âžš\n      ")])]):e._e()]),e._v(" "),e.editMode?o("InputBox",{attrs:{label:"Product ID",disabled:"",internal:!0},model:{value:e.doc._id,callback:function(t){e.$set(e.doc,"_id",t)},expression:"doc._id"}}):e._e(),e._v(" "),o("SelectBox",{attrs:{options:e.types,label:"Select Product Type",internal:!0},model:{value:e.doc.type,callback:function(t){e.$set(e.doc,"type",t)},expression:"doc.type"}}),e._v(" "),o("SelectBox",{attrs:{options:e.genders,label:"Select Preferred Gender"},model:{value:e.doc.gender,callback:function(t){e.$set(e.doc,"gender",t)},expression:"doc.gender"}}),e._v(" "),o("SelectBox",{attrs:{options:e.availabilityTypes,label:"Select Availablity Type",internal:!0},model:{value:e.doc.availabilityType,callback:function(t){e.$set(e.doc,"availabilityType",t)},expression:"doc.availabilityType"}}),e._v(" "),e.thirdPartyProduct?e._e():o("SelectBox",{attrs:{options:e.collections,label:"Select Collection"},model:{value:e.doc.bounipun_collection,callback:function(t){e.$set(e.doc,"bounipun_collection",t)},expression:"doc.bounipun_collection"}}),e._v(" "),o("InputBox",{attrs:{label:"Bounipun Style ID"},model:{value:e.doc.styleId,callback:function(t){e.$set(e.doc,"styleId",t)},expression:"doc.styleId"}}),e._v(" "),e.underAutograph?o("InputBox",{attrs:{label:"Bounipun Print No.",internal:!0},model:{value:e.doc.printNo,callback:function(t){e.$set(e.doc,"printNo",t)},expression:"doc.printNo"}}):e._e(),e._v(" "),o("InputBox",{attrs:{label:"Product Name"},model:{value:e.doc.name,callback:function(t){e.$set(e.doc,"name",t)},expression:"doc.name"}}),e._v(" "),o("InputBox",{attrs:{label:"Alias"},model:{value:e.doc.alias,callback:function(t){e.$set(e.doc,"alias",t)},expression:"doc.alias"}}),e._v(" "),o("TextBox",{attrs:{label:"Design Description"},model:{value:e.doc.description,callback:function(t){e.$set(e.doc,"description",t)},expression:"doc.description"}}),e._v(" "),e.rtsAndUnderBounipun?o("div",{staticClass:"rts-variant-and-fabric"},[o("SelectBox",{attrs:{options:e.variants,label:"Select Variant:"},model:{value:e.doc.rtsDirectVariant,callback:function(t){e.$set(e.doc,"rtsDirectVariant",t)},expression:"doc.rtsDirectVariant"}}),e._v(" "),o("SelectBox",{attrs:{options:e.getRTSFabrics(e.doc.rtsDirectVariant),label:"Select Fabric:"},model:{value:e.doc.rtsDirectFabric,callback:function(t){e.$set(e.doc,"rtsDirectFabric",t)},expression:"doc.rtsDirectFabric"}})],1):e._e(),e._v(" "),e.thirdPartyProduct?e._e():o("InputBox",{attrs:{label:"Color Source",disabled:!0},model:{value:e.doc.colorSource,callback:function(t){e.$set(e.doc,"colorSource",t)},expression:"doc.colorSource"}}),e._v(" "),o("ColorPicker",{directives:[{name:"show",rawName:"v-show",value:"bounipun-colors"===e.doc.colorSource,expression:"doc.colorSource === 'bounipun-colors'"}],ref:"colorPicker",on:{colorAdded:e.addNewColor,colorRemoved:e.colorDeselected}}),e._v(" "),""!==e.doc.colorSource?o("div",{staticClass:"colors",staticStyle:{width:"100%",position:"relative"}},[e._l(e.doc.colors,(function(t,n){return o("div",{key:t.key,staticClass:"color-box",class:{"main-color":t.mainColor}},[o("div",{staticClass:"color-details-1"},[o("InputBox",{staticClass:"name",attrs:{label:"Color Name",disabled:e.bounipunColors},model:{value:t.name,callback:function(o){e.$set(t,"name",o)},expression:"color.name"}}),e._v(" "),o("InputBox",{staticClass:"code",attrs:{label:"Code",disabled:e.bounipunColors},model:{value:t.code,callback:function(o){e.$set(t,"code",o)},expression:"color.code"}}),e._v(" "),o("div",{staticClass:"center color-bases"},[o("SelectBox",{staticClass:"base-color",attrs:{options:e.baseColors,label:"Base Color",disabled:e.bounipunColors,slim:!0},model:{value:t.baseColor,callback:function(o){e.$set(t,"baseColor",o)},expression:"color.baseColor"}}),e._v(" "),o("SelectBox",{staticClass:"base-color",attrs:{options:e.baseColors,label:"CLR #1",disabled:e.bounipunColors,slim:!0},model:{value:t.additionalColor1,callback:function(o){e.$set(t,"additionalColor1",o)},expression:"color.additionalColor1"}}),e._v(" "),o("SelectBox",{staticClass:"base-color",attrs:{options:e.baseColors,label:"ClR #2",disabled:e.bounipunColors,slim:!0},model:{value:t.additionalColor2,callback:function(o){e.$set(t,"additionalColor2",o)},expression:"color.additionalColor2"}})],1)],1),e._v(" "),o("UploadImage",{ref:"imageUploader",refInFor:!0,attrs:{label:"Upload Images",uploadType:"product"},on:{updated:function(t){return e.imageListUpdated(t,n)}}}),e._v(" "),o("button",{staticClass:"action delete",staticStyle:{"font-size":"9px",position:"absolute",top:"0",right:"0"},on:{click:function(t){return e.removeColor(n,!0)}}},[e._v("\n        Remove Color\n      ")]),e._v(" "),o("div",{staticClass:"set-main"},[o("img",{class:{"active-color":e.isActiveColor(n)},attrs:{src:"/icons/green_check.png"},on:{click:function(t){return e.setMainColor(n)}}}),e._v(" "),o("span",[e._v(" Main Color ")])]),e._v(" "),o("div",{staticClass:"center-col",staticStyle:{"align-items":"flex-end",width:"100%"}},[o("InputBox",{attrs:{label:"Disclaimer"},model:{value:t.disclaimer,callback:function(o){e.$set(t,"disclaimer",o)},expression:"color.disclaimer"}}),e._v(" "),o("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center"}},[o("Toggle",{attrs:{label:"Status",activeText:"Live",inactiveText:"Hidden",width:"100px",disabled:e.isActiveColor(n)},model:{value:t.status,callback:function(o){e.$set(t,"status",o)},expression:"color.status"}}),e._v(" "),"made-to-order"===e.doc.availabilityType?o("button",{staticClass:"action",staticStyle:{"font-size":"10px",width:"70%","background-color":"orange"},on:{click:function(o){return e.toggleRTSPanel(t)}}},[e._v("\n            "+e._s(t.showRTSPanel?"Hide":"Show")+" RTS PANEL\n          ")]):e._e()],1),e._v(" "),t.showRTSPanel?o("div",{staticClass:"ready-to-ship-marker",staticStyle:{width:"100%",border:"1px dashed orange"}},[o("SelectBox",{attrs:{options:e.variants,label:"Select Variant:"},model:{value:t.rtsVariant,callback:function(o){e.$set(t,"rtsVariant",o)},expression:"color.rtsVariant"}}),e._v(" "),o("SelectBox",{attrs:{options:e.getRTSFabrics(t.rtsVariant),label:"Select Fabric:"},model:{value:t.rtsFabric,callback:function(o){e.$set(t,"rtsFabric",o)},expression:"color.rtsFabric"}}),e._v(" "),o("div",{staticClass:"flex center"},[o("InputBox",{attrs:{label:"Stock:"},model:{value:t.rtsStock,callback:function(o){e.$set(t,"rtsStock",o)},expression:"color.rtsStock"}}),e._v(" "),o("div",{staticClass:"rts-pricing flex col",staticStyle:{width:"100%",margin:"10px 0"}},[o("Toggle",{attrs:{activeText:"Enabled",label:"Auto Calculations"},model:{value:e.enableRTSSuggestedPricing,callback:function(t){e.enableRTSSuggestedPricing=t},expression:"enableRTSSuggestedPricing"}}),e._v(" "),o("div",{staticClass:"currency-box"},[o("span",{staticClass:"code flex center"},[e._v(" INR ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.directPrice,expression:"color.directPrice"}],staticClass:"price shadow",attrs:{type:"text",placeholder:"Price (INR)"},domProps:{value:t.directPrice},on:{input:[function(o){o.target.composing||e.$set(t,"directPrice",o.target.value)},function(o){return e.baseRTSDirectPriceUpdated(t)}]}})]),e._v(" "),e._l(e.currencies,(function(n){var code=n.code;return o("div",{key:code,staticClass:"currency-box"},[o("span",{staticClass:"code flex center"},[e._v("\n                  "+e._s(code)+"\n                ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.directPricing[code],expression:"color.directPricing[code]"}],staticClass:"price shadow",attrs:{type:"text",placeholder:"Price ("+code+")"},domProps:{value:t.directPricing[code]},on:{input:function(o){o.target.composing||e.$set(t.directPricing,code,o.target.value)}}})])}))],2)],1),e._v(" "),o("div",{staticClass:"center"},[o("button",{staticClass:"action",staticStyle:{"font-size":"12px",margin:"10px 0px"},on:{click:function(o){return e.addNewRTSEntry(t)}}},[e._v("\n              Add New RTS Entry\n            ")])])],1):e._e()],1)],1)})),e._v(" "),"bounipun-colors"!==e.doc.colorSource?o("button",{staticClass:"action",staticStyle:{"font-size":"9px",position:"absolute",bottom:"-30px",right:"10px"},on:{click:function(t){return e.addNewColor({_id:null,name:"",code:""})}}},[e._v("\n      Add Color\n    ")]):e._e()],2):e._e(),e._v(" "),e.thirdPartyProduct||e.readyToShip?e._e():o("c-boxes",{attrs:{options:e.variants,label:"Variants"}}),e._v(" "),e.thirdPartyProduct||e.readyToShip?e._e():o("div",e._l(e.selectedVariantsWithFabricOptions,(function(t){return o("fabric-selector",{key:t._id,ref:"fabricSelector"+t._id,refInFor:!0,attrs:{label:t.name,variant:t,currencies:e.currencies,inflationPercentage:e.collectionInflationPercentage,setNonINRPrices:e.setNonINRPrices},on:{fabricSelectionUpdated:e.fabricSelectionUpdated}})})),1),e._v(" "),e.thirdPartyProduct||e.readyToShip?o("div",{staticClass:"flex center col"},[o("Toggle",{attrs:{activeText:"Enabled",label:"Auto Calculations"},model:{value:e.enableSuggestedPricing,callback:function(t){e.enableSuggestedPricing=t},expression:"enableSuggestedPricing"}}),e._v(" "),o("div",{staticClass:"currency-box"},[o("span",{staticClass:"code flex center"},[e._v(" Price (INR) ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.doc.directPrice,expression:"doc.directPrice"}],staticClass:"price shadow",attrs:{type:"text",placeholder:"Price (INR)"},domProps:{value:e.doc.directPrice},on:{input:[function(t){t.target.composing||e.$set(e.doc,"directPrice",t.target.value)},e.baseDirectPriceUpdated]}})]),e._v(" "),e._l(Object.keys(e.doc.directPricing),(function(code){return o("div",{key:code,staticClass:"currency-box"},[o("span",{staticClass:"code flex center"},[e._v("\n        "+e._s(code)+"\n      ")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.doc.directPricing[code],expression:"doc.directPricing[code]"}],staticClass:"price shadow",attrs:{type:"text",placeholder:"Price ("+code+")"},domProps:{value:e.doc.directPricing[code]},on:{input:function(t){t.target.composing||e.$set(e.doc.directPricing,code,t.target.value)}}})])}))],2):e._e(),e._v(" "),e.thirdPartyProduct||e.readyToShip?o("InputBox",{attrs:{label:"Stock"},model:{value:e.doc.stock,callback:function(t){e.$set(e.doc,"stock",t)},expression:"doc.stock"}}):e._e(),e._v(" "),o("Toggle",{attrs:{label:"Lock Status",activeText:"ðŸ”’ Locked",inactiveText:"Unlocked"},model:{value:e.doc.lock,callback:function(t){e.$set(e.doc,"lock",t)},expression:"doc.lock"}}),e._v(" "),o("Toggle",{attrs:{label:"Ask for Price:",activeText:"Yes",inactiveText:"No"},model:{value:e.doc.askForPrice,callback:function(t){e.$set(e.doc,"askForPrice",t)},expression:"doc.askForPrice"}}),e._v(" "),o("div",[o("label",{staticClass:"label"},[e._v("\n      On Sale:\n    ")]),e._v(" "),o("span",[e._v("\n    "+e._s(void 0!==e.doc.sale&&null!==e.doc.sale?"YUP":"NOPE")+"\n    ")])]),e._v(" "),o("Toggle",{attrs:{label:"Status"},model:{value:e.doc.status,callback:function(t){e.$set(e.doc,"status",t)},expression:"doc.status"}}),e._v(" "),o("div",{staticClass:"center-space"},[e.loading?o("img",{staticClass:"loading",attrs:{src:"/loading.gif"}}):e._e(),e._v(" "),e.updated?o("img",{staticClass:"action-complete",attrs:{src:"/complete.gif"}}):e._e(),e._v(" "),o("button",{staticClass:"action",attrs:{disabled:e.loading},on:{click:e.updateDocument}},[e._v("\n      "+e._s(e.editMode?"Apply Changes":"Add Product")+"\n    ")]),e._v(" "),e.editMode?o("button",{staticClass:"action delete",attrs:{disabled:e.loading},on:{click:e.deleteDocument}},[e._v("\n      Delete\n    ")]):e._e(),e._v(" "),e.errorToast.status?o("Toast",{attrs:{msg:e.errorToast.msg,show:e.errorToast.status,error:!0}}):e._e()],1),e._v(" "),o("br"),e._v(" "),o("div",{staticClass:"center"},[e.error.status?o("p",{staticClass:"error"},[e._v(e._s(e.error.msg))]):e._e()])],1)}),[],!1,null,"3f3dae83",null);t.default=component.exports;installComponents(component,{CancelUpdate:o(512).default,InputBox:o(504).default,SelectBox:o(521).default,TextBox:o(510).default,ColorPicker:o(657).default,UploadImage:o(535).default,Toggle:o(509).default,CBoxes:o(658).default,FabricSelector:o(740).default,Toast:o(530).default})}}]);